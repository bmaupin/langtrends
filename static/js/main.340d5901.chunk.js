(this.webpackJsonplangtrends=this.webpackJsonplangtrends||[]).push([[0],{116:function(t,e,n){},184:function(t,e,n){},186:function(t,e,n){},187:function(t,e,n){},188:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(45),c=n.n(a),u=n(59),s=n(16),i=n(206),o=n(212),l=n(209),h=n(210),f=(n(116),n(4));function p(t){var e=t.intervalInMonths;return Object(f.jsxs)(h.a.Group,{basic:!0,className:"button-group",children:[Object(f.jsx)(h.a,{value:"1",active:1===e,onClick:t.handleItemClick,children:"Monthly"}),Object(f.jsx)(h.a,{value:"3",active:3===e,onClick:t.handleItemClick,children:"Quarterly"}),Object(f.jsx)(h.a,{value:"12",active:12===e,onClick:t.handleItemClick,children:"Yearly"})]})}var b,j=n(8),d=n.n(j),v=n(14),g=n(136),O=n.n(g),m=n(34),x=n(23),y=n(17),k=n(61),w=n(58),S=n(31),C=n(47),_="https://bmaupin.github.io/langtrends-data/data",T=function(){function t(){Object(x.a)(this,t)}return Object(y.a)(t,null,[{key:"buildDates",value:function(){var e=Object(v.a)(d.a.mark((function e(n){var r,a,c,u,s,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:C.numberOfDates,a=[],e.next=4,t.getLatestDateFromApi();case 4:return c=e.sent,e.next=7,t.getEarliestDateFromApi();case 7:u=e.sent,s=0;case 9:if(!(s<r)){e.next=17;break}if(!(c<u)){e.next=12;break}return e.abrupt("break",17);case 12:a.push(c),c=t.subtractMonthsUTC(c,n);case 14:s++,e.next=9;break;case 17:return a.reverse(),e.abrupt("return",a.map((function(t){return t.toISOString().slice(0,10)})));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestDateFromApi",value:function(){var e=Object(v.a)(d.a.mark((function e(){var n,r,a,c,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getScoresFromApi();case 2:n=e.sent,r="",a=Object(S.a)(n);try{for(a.s();!(c=a.n()).done;)(u=c.value).date>r&&(r=u.date)}catch(s){a.e(s)}finally{a.f()}return e.abrupt("return",new Date(r));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getScoresFromApi",value:function(){var t=Object(v.a)(d.a.mark((function t(e){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI("".concat(_,"/scores.json")),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:if(a=t.sent,!e){t.next=9;break}return t.abrupt("return",a.filter((function(t){return e.includes(t.date)})));case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getEarliestDateFromApi",value:function(){var e=Object(v.a)(d.a.mark((function e(){var n,r,a,c,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getScoresFromApi();case 2:n=e.sent,r="",a=Object(S.a)(n);try{for(a.s();!(c=a.n()).done;)(u=c.value).date<r&&(r=u.date)}catch(s){a.e(s)}finally{a.f()}return e.abrupt("return",new Date(r));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"subtractMonthsUTC",value:function(t,e){var n=new Date(t);return n.setUTCMonth(n.getUTCMonth()-e),n}},{key:"getScores",value:function(){var t=Object(v.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getScoresWithLanguages(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getScoresWithLanguages",value:function(){var t=Object(v.a)(d.a.mark((function t(e){var n,r,a,c,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLanguagesFromApi();case 2:return n=t.sent,t.next=5,this.getScoresFromApi(e);case 5:r=t.sent,a=Object(S.a)(r);try{for(u=function(){var t=c.value;t.language=n.find((function(e){return e.id===t.languageId}))},a.s();!(c=a.n()).done;)u()}catch(s){a.e(s)}finally{a.f()}return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLanguagesFromApi",value:function(){var t=Object(v.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=encodeURI("".concat(_,"/languages.json")),t.next=3,fetch(e);case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}(),F=n(47),D=function(){function t(e){Object(x.a)(this,t),this.dates=void 0,this.interval=void 0,this.interval=e}return Object(y.a)(t,[{key:"getDates",value:function(){var t=Object(v.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDatesForCalculations();case 2:return t.abrupt("return",t.sent.slice(1));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDatesForCalculations",value:function(){var t=Object(v.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dates){t.next=4;break}return t.next=3,T.buildDates(this.interval,F.numberOfDates+1);case 3:this.dates=t.sent;case 4:return t.abrupt("return",this.dates);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSeries",value:function(){var e=Object(v.a)(d.a.mark((function e(){var n,r,a,c,u,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDatesForCalculations();case 2:return n=e.sent,e.next=5,T.getScores(n);case 5:return r=e.sent,a=t.organizeScoresByDate(r),c=this.getCustomScoresByDate(a,n),e.next=10,this.getDates();case 10:return u=e.sent,e.next=13,t.calculateTopScores(c,u);case 13:return s=e.sent,e.next=16,this.formatDataForChart(s,u);case 16:return i=e.sent,e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomScoresByDate",value:function(e,n){for(var r={},a=1;a<n.length;a++){var c=n[a],u=n[a-1];for(var s in r[c]={},e[c]){var i=this.calculateCustomScore(e[u][s],e[c][s]);i=t.convertNonFiniteNumber(i),r[c][s]=i}}return r}},{key:"formatDataForChart",value:function(){var e=Object(v.a)(d.a.mark((function e(n,r){var a,c,u,s,i,o,l,h,f,p,b,j,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],c=t.getAllTopLanguages(n),u=Object(S.a)(c);try{for(u.s();!(s=u.n()).done;)i=s.value,a.push({title:i,data:[]})}catch(d){u.e(d)}finally{u.f()}for(o=0;o<r.length;o++){l=r[o],h=0,f=Object(S.a)(c);try{for(f.s();!(p=f.n()).done;)b=p.value,j=0,v=0,n[l].hasOwnProperty(b)&&(j=n[l][b],v=Object.keys(n[l]).indexOf(b)+1),a[h].data.push({x:o,y:v,hintTitle:b,hintValue:this.formatHintValue(j)}),h++}catch(d){f.e(d)}finally{f.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"organizeScoresByDate",value:function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].date,a=t[n].language.name,c=t[n].points;e.hasOwnProperty(r)||(e[r]={}),e[r][a]=c}return e}},{key:"convertNonFiniteNumber",value:function(t){return Number.isFinite(t)?t:0}},{key:"calculateTopScores",value:function(){var t=Object(v.a)(d.a.mark((function t(e,n){var r,a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r={},a=function(t){var a=n[t];r[a]={};for(var c=Object.keys(e[a]).sort((function(t,n){return e[a][n]-e[a][t]})),u=0;u<F.numberOfLanguages;u++){var s=c[u];r[a][s]=e[a][s]}},c=0;c<n.length;c++)a(c);return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAllTopLanguages",value:function(t){var e=[];for(var n in t)for(var r in t[n])e.includes(r)||e.push(r);return e}}]),t}(),I=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e}},{key:"formatHintValue",value:function(t){return String(t)}}]),n}(D),M=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e/t*100}},{key:"formatHintValue",value:function(t){return"".concat(Math.round(t),"% growth")}}]),n}(D),N=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e-t}},{key:"formatHintValue",value:function(t){return"+".concat(t)}}]),n}(D);!function(t){t.FastestGrowth="fastest_growth",t.MostGrowth="most_growth",t.TopLanguages="top_languages"}(b||(b={}));var L=function(){function t(){Object(x.a)(this,t)}return Object(y.a)(t,null,[{key:"fromType",value:function(){var t=Object(v.a)(d.a.mark((function t(e,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===b.FastestGrowth?3:t.t0===b.MostGrowth?5:t.t0===b.TopLanguages?7:9;break;case 3:return r=new M(n),t.abrupt("break",10);case 5:return r=new N(n),t.abrupt("break",10);case 7:return r=new I(n),t.abrupt("break",10);case 9:throw new Error("Unknown chart type: ".concat(e));case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();function A(t,e){this._context=t,this._compression=e}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:!function(t,e,n){t._context.bezierCurveTo(t._prevX+(e-t._prevX)*t._compression,t._prevY,e-(e-t._prevX)*t._compression,n,e,n)}(this,t,e)}this._prevX=t,this._prevY=e}};var G=function t(e){function n(t){return new A(t,e)}return n.compression=function(e){return t(e)},n}(.75);n(184),n(185);function E(t){var e=Object(r.useState)([]),n=Object(s.a)(e,2),a=n[0],c=n[1],u=Object(r.useState)([]),i=Object(s.a)(u,2),o=i[0],l=i[1],h=Object(r.useState)(null),p=Object(s.a)(h,2),b=p[0],j=p[1],g=Object(r.useState)(null),x=Object(s.a)(g,2),y=x[0],k=x[1],w=Object(r.useState)([]),S=Object(s.a)(w,2),C=S[0],_=S[1],T=Object(r.useState)([]),D=Object(s.a)(T,2),I=D[0],M=D[1];Object(r.useEffect)((function(){var e=function(){var e=Object(v.a)(d.a.mark((function e(){var n,r,a,u,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.fromType(t.chartType,t.intervalInMonths);case 2:return n=e.sent,e.next=5,n.getDates();case 5:return r=e.sent,e.next=8,n.getSeries();case 8:a=e.sent,u=N(a),s=A(a),c(a),l(r),_(u),M(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.chartType,t.intervalInMonths]);var N=function(t){return t.map((function(t){return t.data[0]})).sort((function(t,e){return e.y-t.y})).map((function(t){return t&&t.hintTitle}))},A=function(t){return t.map((function(t){return t.data[t.data.length-1]})).sort((function(t,e){return e.y-t.y})).map((function(t){return t&&t.hintTitle}))},E=function(){j(null),k(null)},V=function(t){return t.slice(0,7)},U=G.compression(.5);return Object(f.jsx)("div",{className:"chart-container",children:Object(f.jsx)("div",{className:"chart-content",children:Object(f.jsxs)(m.a,{height:49*F.numberOfLanguages,margin:{left:80,right:80},yDomain:[F.numberOfLanguages,1],children:[Object(f.jsx)(m.e,{}),Object(f.jsx)(m.c,{}),Object(f.jsx)(m.f,{tickFormat:function(t,e){return V(o[e])},tickTotal:o.length}),Object(f.jsx)(m.g,{orientation:"left",tickFormat:function(t,e){return C[e]}}),Object(f.jsx)(m.g,{orientation:"right",tickFormat:function(t,e){return I[e]}}),a.map((function(t,e){return Object(f.jsx)(m.d,{curve:U,getNull:function(t){return 0!==t.y},color:O.a.get(t.title,!0).color,data:t.data,opacity:null===y||y===e?1:.5,onValueMouseOut:E,onValueMouseOver:function(t){return n=e,j(t),void k(n);var n},strokeWidth:null!==y&&y===e?4:void 0,lineStyle:{pointerEvents:"none"}},t.title)})),b&&Object(f.jsx)(m.b,{format:function(t){return[{title:t.hintTitle,value:t.hintValue}]},value:b})]})})})}function V(t){var e=t.chartType;return Object(f.jsxs)(h.a.Group,{basic:!0,className:"button-group",children:[Object(f.jsx)(h.a,{name:b.FastestGrowth,active:e===b.FastestGrowth,onClick:t.handleItemClick,children:"Fastest growth"}),Object(f.jsx)(h.a,{name:b.MostGrowth,active:e===b.MostGrowth,onClick:t.handleItemClick,children:"Most growth"}),Object(f.jsx)(h.a,{name:b.TopLanguages,active:e===b.TopLanguages,onClick:t.handleItemClick,children:"Top"})]})}n(186);function U(){var t,e,n=Object(u.c)(),r=Object(s.a)(n,2),a=r[0],c=r[1],h=b.MostGrowth;return Object(f.jsx)(i.a,{children:Object(f.jsx)(o.a,{centered:!0,padded:!0,children:Object(f.jsx)(l.a.Group,{className:"main",children:Object(f.jsxs)(l.a.Content,{children:[Object(f.jsx)(o.a,{centered:!0,className:"button-group-grid",children:Object(f.jsx)(V,{chartType:null!==(t=a.get("chart_type"))&&void 0!==t?t:h,handleItemClick:function(t,e){var n=e.name;n&&(a.set("chart_type",n),c(a))}})}),Object(f.jsx)(E,{chartType:null!==(e=a.get("chart_type"))&&void 0!==e?e:h,intervalInMonths:Number(a.get("interval")||3)}),Object(f.jsx)(o.a,{centered:!0,className:"button-group-grid",children:Object(f.jsx)(p,{handleItemClick:function(t,e){var n=e.value;a.set("interval",n),c(a)},intervalInMonths:Number(a.get("interval")||3)})})]})})})})}var z=n(208),H=n(207),B=n(65);n(187);function P(){return Object(f.jsx)(z.a,{attached:!0,borderless:!0,inverted:!0,children:Object(f.jsxs)(i.a,{children:[Object(f.jsx)(z.a.Item,{className:"header-title",fitted:"horizontally",header:!0,children:Object(f.jsx)(u.b,{to:".",children:"Programming language trends"})}),Object(f.jsxs)(z.a.Menu,{position:"right",children:[Object(f.jsx)(H.a,{on:"click",trigger:Object(f.jsx)(z.a.Item,{icon:!0,children:Object(f.jsx)(B.a,{name:"help circle",size:"big"})}),children:Object(f.jsxs)(H.a.Content,{children:[Object(f.jsx)("h3",{children:"How the data is calculated"}),Object(f.jsx)("p",{children:"First, a base numerical value for a given language and date is calculated by adding the total number of GitHub repositories to the total number of Stack Overflow tags for that language up to that day."}),Object(f.jsx)("h4",{children:"Fastest growth"}),Object(f.jsxs)("p",{children:["Languages with the highest percentage change compared to the previous date. Note that scores under a"," ",Object(f.jsx)("a",{href:"https://github.com/bmaupin/langtrends-data/blob/96b8148cc525d129d11a7a2a357429afe0b6ee63/classes/settings.json#L3",children:"certain threshold"})," ","are filtered out to reduce"," ",Object(f.jsx)("a",{href:"https://xkcd.com/1102/",children:"dubious claims"}),"."]}),Object(f.jsx)("h4",{children:"Most growth"}),Object(f.jsx)("p",{children:"Languages with the highest numerical change compared to the previous date."}),Object(f.jsx)("h4",{children:"Top"}),Object(f.jsx)("p",{children:"Languages with the total highest value for a particular given date."})]})}),Object(f.jsx)(z.a.Item,{href:"https://github.com/bmaupin/langtrends",icon:!0,children:Object(f.jsx)(B.a,{name:"github",size:"big"})})]})]})})}function X(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(P,{}),Object(f.jsx)(U,{})]})}c.a.render(Object(f.jsxs)(u.a,{children:[Object(f.jsx)(X,{}),","]}),document.getElementById("root"))},47:function(t){t.exports=JSON.parse('{"numberOfDates":12,"numberOfLanguages":10}')}},[[188,1,2]]]);
//# sourceMappingURL=main.340d5901.chunk.js.map