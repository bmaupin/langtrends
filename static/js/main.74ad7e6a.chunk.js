(this.webpackJsonplangtrends=this.webpackJsonplangtrends||[]).push([[0],{103:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),c=n.n(a),s=n(60),u=n(10),i=n(170),o=n(176),l=n(173),h=n(174),p=(n(103),n(4));function f(e){var t=e.intervalInMonths;return Object(p.jsxs)(h.a.Group,{basic:!0,className:"button-group",children:[Object(p.jsx)(h.a,{value:"1",active:1===t,onClick:e.handleItemClick,children:"Monthly"}),Object(p.jsx)(h.a,{value:"3",active:3===t,onClick:e.handleItemClick,children:"Quarterly"}),Object(p.jsx)(h.a,{value:"12",active:12===t,onClick:e.handleItemClick,children:"Yearly"})]})}var b,j=n(24),d=n(5),v=n.n(d),g=n(18),O=n(112),m=n.n(O),x=n(115),y=n(14),k=n(12),w=n(33),S=n(34),C=n(7),_=n(49),T="https://bmaupin.github.io/langtrends-data/data",D=function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,null,[{key:"buildDates",value:function(){var t=Object(g.a)(v.a.mark((function t(n){var r,a,c,s,u,i=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:_.numberOfDates,a=[],t.next=4,e.getLatestDateFromApi();case 4:return c=t.sent,t.next=7,e.getEarliestDateFromApi();case 7:s=t.sent,u=0;case 9:if(!(u<r)){t.next=17;break}if(!(c<s)){t.next=12;break}return t.abrupt("break",17);case 12:a.push(c),c=e.subtractMonthsUTC(c,n);case 14:u++,t.next=9;break;case 17:return a.reverse(),t.abrupt("return",a.map((function(e){return e.toISOString().slice(0,10)})));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLatestDateFromApi",value:function(){var t=Object(g.a)(v.a.mark((function t(){var n,r,a,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getScoresFromApi();case 2:n=t.sent,r="",a=Object(C.a)(n);try{for(a.s();!(c=a.n()).done;)(s=c.value).date>r&&(r=s.date)}catch(u){a.e(u)}finally{a.f()}return t.abrupt("return",new Date(r));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getScoresFromApi",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI("".concat(T,"/scores.json")),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:if(a=e.sent,!t){e.next=9;break}return e.abrupt("return",a.filter((function(e){return t.includes(e.date)})));case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEarliestDateFromApi",value:function(){var t=Object(g.a)(v.a.mark((function t(){var n,r,a,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getScoresFromApi();case 2:n=t.sent,r="",a=Object(C.a)(n);try{for(a.s();!(c=a.n()).done;)(s=c.value).date<r&&(r=s.date)}catch(u){a.e(u)}finally{a.f()}return t.abrupt("return",new Date(r));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"subtractMonthsUTC",value:function(e,t){var n=new Date(e);return n.setUTCMonth(n.getUTCMonth()-t),n}},{key:"getScores",value:function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getScoresWithLanguages(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScoresWithLanguages",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,a,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLanguagesFromApi();case 2:return n=e.sent,e.next=5,this.getScoresFromApi(t);case 5:r=e.sent,a=Object(C.a)(r);try{for(s=function(){var e=c.value;e.language=n.find((function(t){return t.id===e.languageId}))},a.s();!(c=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLanguagesFromApi",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=encodeURI("".concat(T,"/languages.json")),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),F=n(49),L=function(){function e(t){Object(y.a)(this,e),this.dates=void 0,this.interval=void 0,this.interval=t}return Object(k.a)(e,[{key:"getDates",value:function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDatesForCalculations();case 2:return e.abrupt("return",e.sent.slice(1));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDatesForCalculations",value:function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dates){e.next=4;break}return e.next=3,D.buildDates(this.interval,F.numberOfDates+1);case 3:this.dates=e.sent;case 4:return e.abrupt("return",this.dates);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSeries",value:function(){var t=Object(g.a)(v.a.mark((function t(){var n,r,a,c,s,u,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDatesForCalculations();case 2:return n=t.sent,t.next=5,D.getScores(n);case 5:return r=t.sent,a=e.organizeScoresByDate(r),c=this.getCustomScoresByDate(a,n),t.next=10,this.getDates();case 10:return s=t.sent,t.next=13,e.calculateTopScores(c,s);case 13:return u=t.sent,t.next=16,this.formatDataForChart(u,s);case 16:return i=t.sent,t.abrupt("return",i);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getCustomScoresByDate",value:function(t,n){for(var r={},a=1;a<n.length;a++){var c=n[a],s=n[a-1];for(var u in r[c]={},t[c]){var i=this.calculateCustomScore(t[s][u],t[c][u]);i=e.convertNonFiniteNumber(i),r[c][u]=i}}return r}},{key:"formatDataForChart",value:function(){var t=Object(g.a)(v.a.mark((function t(n,r){var a,c,s,u,i,o,l,h,p,f,b,j,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=e.getAllTopLanguages(n),s=Object(C.a)(c);try{for(s.s();!(u=s.n()).done;)i=u.value,a.push({label:i,data:[]})}catch(v){s.e(v)}finally{s.f()}for(o=0;o<r.length;o++){l=r[o],h=0,p=Object(C.a)(c);try{for(p.s();!(f=p.n()).done;)b=f.value,j=0,d=0,n[l].hasOwnProperty(b)&&(j=n[l][b],d=Object.keys(n[l]).indexOf(b)+1),a[h].data.push({x:o,y:d,seriesLabel:b,tooltipValue:this.formatTooltipValue(j)}),h++}catch(v){p.e(v)}finally{p.f()}}return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"organizeScoresByDate",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n].date,a=e[n].language.name,c=e[n].points;t.hasOwnProperty(r)||(t[r]={}),t[r][a]=c}return t}},{key:"convertNonFiniteNumber",value:function(e){return Number.isFinite(e)?e:0}},{key:"calculateTopScores",value:function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r={},a=function(e){var a=n[e];r[a]={};for(var c=Object.keys(t[a]).sort((function(e,n){return t[a][n]-t[a][e]})),s=0;s<F.numberOfLanguages;s++){var u=c[s];r[a][u]=t[a][u]}},c=0;c<n.length;c++)a(c);return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllTopLanguages",value:function(e){var t=[];for(var n in e)for(var r in e[n])t.includes(r)||t.push(r);return t}}]),e}(),M=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculateCustomScore",value:function(e,t){return t}},{key:"formatTooltipValue",value:function(e){return String(e)}}]),n}(L),I=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculateCustomScore",value:function(e,t){return t/e*100}},{key:"formatTooltipValue",value:function(e){return"".concat(Math.round(e),"% growth")}}]),n}(L),N=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculateCustomScore",value:function(e,t){return t-e}},{key:"formatTooltipValue",value:function(e){return"+".concat(e)}}]),n}(L);!function(e){e.FastestGrowth="fastest_growth",e.MostGrowth="most_growth",e.TopLanguages="top_languages"}(b||(b={}));var A=function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,null,[{key:"fromType",value:function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===b.FastestGrowth?3:e.t0===b.MostGrowth?5:e.t0===b.TopLanguages?7:9;break;case 3:return r=new I(n),e.abrupt("break",10);case 5:return r=new N(n),e.abrupt("break",10);case 7:return r=new M(n),e.abrupt("break",10);case 9:throw new Error("Unknown chart type: ".concat(t));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function G(e,t){this._context=e,this._compression=t}G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:!function(e,t,n){e._context.bezierCurveTo(e._prevX+(t-e._prevX)*e._compression,e._prevY,t-(t-e._prevX)*e._compression,n,t,n)}(this,e,t)}this._prevX=e,this._prevY=t}};var V=function e(t){function n(e){return new G(e,t)}return n.compression=function(t){return e(t)},n}(.75);n(146);function E(e){var t=Object(r.useState)(-1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(u.a)(s,2),o=i[0],l=i[1],h=Object(r.useState)([]),f=Object(u.a)(h,2),b=f[0],d=f[1],O=Object(r.useState)(""),y=Object(u.a)(O,2),k=y[0],w=y[1],S=Object(r.useState)([]),C=Object(u.a)(S,2),_=C[0],T=C[1],D=Object(r.useState)([]),L=Object(u.a)(D,2),M=L[0],I=L[1];Object(r.useEffect)((function(){var t=function(e){return N(e.map((function(e){return e.data[0]})))},n=function(e){return N(e.map((function(e){return e.data[e.data.length-1]})))},r=function(){var r=Object(g.a)(v.a.mark((function r(){var a,c,s,u,i;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A.fromType(e.chartType,e.intervalInMonths);case 2:return a=r.sent,r.next=5,a.getDates();case 5:return c=r.sent,r.next=8,a.getSeries();case 8:s=r.sent,u=t(s),i=n(s),l(s),d(c),T(u),I(i);case 15:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[e.chartType,e.intervalInMonths]);var N=function(e){return e.filter((function(e){return 0!==e.y})).sort((function(e,t){return e.y-t.y})).map((function(e){return e&&e.seriesLabel}))},G=Object(r.useMemo)((function(){return{formatters:{scale:function(e){return b[e]?b[e].slice(0,7):""}},getValue:function(e){return e.x},scaleType:"linear"}}),[b]),E=Object(r.useMemo)((function(){var e={getValue:function(e){return 0===e.y?null:e.y},invert:!0,scaleType:"linear",tickCount:F.numberOfLanguages};return[Object(j.a)(Object(j.a)({},e),{},{curve:V.compression(.5),formatters:{scale:function(e){return _[e-1]},tooltip:function(){return k}},showDatumElements:!0}),Object(j.a)(Object(j.a)({},e),{},{formatters:{scale:function(e){return M[e-1]}},position:"right"})]}),[k,_,M]);return Object(p.jsx)("div",{className:"chart-container",children:Object(p.jsx)("div",{className:"chart-content",style:{height:48*F.numberOfLanguages,maxWidth:"800px"},children:o.length>0&&Object(p.jsx)(x.a,{options:{data:o,getDatumStyle:function(e,t){return null===e.secondaryValue?{circle:{r:0}}:{}},getSeriesStyle:function(e,t){var n={circle:{r:5},color:m.a.get(e.label,!0).color,transition:"none"};return"focused"===t?Object(j.a)(Object(j.a)({},n),{},{circle:Object(j.a)(Object(j.a)({},n.circle),{},{strokeWidth:"4px"}),line:{strokeWidth:"4px"}}):-1!==a?Object(j.a)(Object(j.a)({},n),{},{circle:Object(j.a)(Object(j.a)({},n.circle),{},{opacity:"0.5"}),line:{opacity:"0.5"}}):n},interactionMode:"closest",onFocusDatum:function(e){e?(c(e.seriesIndex),w(e.originalDatum.tooltipValue)):c(-1)},primaryAxis:G,primaryCursor:{showLabel:!1,showLine:!1},secondaryAxes:E,secondaryCursor:{showLabel:!1,showLine:!1},tooltip:{groupingMode:"single"}}})})})}function U(e){var t=e.chartType;return Object(p.jsxs)(h.a.Group,{basic:!0,className:"button-group",children:[Object(p.jsx)(h.a,{name:b.FastestGrowth,active:t===b.FastestGrowth,onClick:e.handleItemClick,children:"Fastest growth"}),Object(p.jsx)(h.a,{name:b.MostGrowth,active:t===b.MostGrowth,onClick:e.handleItemClick,children:"Most growth"}),Object(p.jsx)(h.a,{name:b.TopLanguages,active:t===b.TopLanguages,onClick:e.handleItemClick,children:"Top"})]})}n(147);function z(){var e,t,n=Object(s.c)(),r=Object(u.a)(n,2),a=r[0],c=r[1],h=b.MostGrowth;return Object(p.jsx)(i.a,{children:Object(p.jsx)(o.a,{centered:!0,padded:!0,children:Object(p.jsx)(l.a.Group,{className:"main",children:Object(p.jsxs)(l.a.Content,{children:[Object(p.jsx)(o.a,{centered:!0,className:"button-group-grid",children:Object(p.jsx)(U,{chartType:null!==(e=a.get("chart_type"))&&void 0!==e?e:h,handleItemClick:function(e,t){var n=t.name;n&&(a.set("chart_type",n),c(a))}})}),Object(p.jsx)(E,{chartType:null!==(t=a.get("chart_type"))&&void 0!==t?t:h,intervalInMonths:Number(a.get("interval")||3)}),Object(p.jsx)(o.a,{centered:!0,className:"button-group-grid",children:Object(p.jsx)(f,{handleItemClick:function(e,t){var n=t.value;a.set("interval",n),c(a)},intervalInMonths:Number(a.get("interval")||3)})})]})})})})}var B=n(172),W=n(171),P=n(65);n(148);function X(){return Object(p.jsx)(B.a,{attached:!0,borderless:!0,inverted:!0,children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(B.a.Item,{className:"header-title",fitted:"horizontally",header:!0,children:Object(p.jsx)(s.b,{to:{search:""},children:"Programming language trends"})}),Object(p.jsxs)(B.a.Menu,{position:"right",children:[Object(p.jsx)(W.a,{on:"click",trigger:Object(p.jsx)(B.a.Item,{icon:!0,children:Object(p.jsx)(P.a,{name:"help circle",size:"big"})}),children:Object(p.jsxs)(W.a.Content,{children:[Object(p.jsx)("h3",{children:"How the data is calculated"}),Object(p.jsx)("p",{children:"First, a base numerical value for a given language and date is calculated by adding the total number of GitHub repositories to the total number of Stack Overflow tags for that language up to that day."}),Object(p.jsx)("h4",{children:"Fastest growth"}),Object(p.jsxs)("p",{children:["Languages with the highest percentage change compared to the previous date. Note that scores under a"," ",Object(p.jsx)("a",{href:"https://github.com/bmaupin/langtrends-data/blob/96b8148cc525d129d11a7a2a357429afe0b6ee63/classes/settings.json#L3",children:"certain threshold"})," ","are filtered out to reduce"," ",Object(p.jsx)("a",{href:"https://xkcd.com/1102/",children:"dubious claims"}),"."]}),Object(p.jsx)("h4",{children:"Most growth"}),Object(p.jsx)("p",{children:"Languages with the highest numerical change compared to the previous date."}),Object(p.jsx)("h4",{children:"Top"}),Object(p.jsx)("p",{children:"Languages with the total highest value for a particular given date."})]})}),Object(p.jsx)(B.a.Item,{href:"https://github.com/bmaupin/langtrends",icon:!0,children:Object(p.jsx)(P.a,{name:"github",size:"big"})})]})]})})}function J(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(X,{}),Object(p.jsx)(z,{})]})}c.a.render(Object(p.jsx)(s.a,{children:Object(p.jsx)(J,{})}),document.getElementById("root"))},49:function(e){e.exports=JSON.parse('{"numberOfDates":12,"numberOfLanguages":10}')}},[[149,1,2]]]);
//# sourceMappingURL=main.74ad7e6a.chunk.js.map