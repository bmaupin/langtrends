{"version":3,"sources":["helpers/ApiHelper.js","helpers/LanguagesChart.js","helpers/TopLanguagesChart.js","helpers/FastestGrowingLanguagesChart.js","helpers/MostGrowthLanguages.js","helpers/ChartFactory.js","helpers/D3SigmoidCurve.js","components/Chart.js","components/ChartBottomMenu.js","components/ChartTopMenu.js","components/ChartGroup.js","components/Header.js","components/App.js","registerServiceWorker.js","index.js"],"names":["settings","require","API_BASE_URL","process","API_TOKEN","ApiHelper","intervalInMonths","numberOfDates","dates","_getLatestDateFromApi","currentDate","_getEarliestDateFromApi","earliestDate","i","push","_subtractMonthsUTC","reverse","apiFilter","order","limit","_callApi","scoresFromApi","Date","date","bypassCache","monthsToSubtract","newDate","setUTCMonth","getUTCMonth","filter","apiUrl","encodeURI","concat","JSON","stringify","window","self","fetch","response","_getCache","cache","match","add","json","currentYearMonthString","_getCurrentYearMonthString","caches","has","open","_getLatestYearMonthStringFromApi","latestYearMonthString","_isApiFinishedSyncing","_deleteAllCaches","yearMonthString","_getNumberOfLanguagesFromApi","_getTotalNumberOfLanguages","where","count","languages","Object","keys","reduce","numberOfIncludedLanguages","languageName","include","toISOString","slice","cacheName","delete","_buildApiFilter","or","map","LanguagesChart","interval","classCallCheck","this","_interval","_getDatesForCalculations","_dates","buildDates","datesForCalculations","getAllScores","scoresByDate","_organizeScoresByDate","customScoresByDate","_getCustomScoresByDate","getDates","datesForChart","_calculateTopScores","topCustomScores","_formatDataForChart","formattedSeriesData","length","previousDate","minimumScore","customScore","_calculateCustomScore","_convertNonFiniteToNull","topScores","formattedScores","allTopLanguages","_getAllTopLanguages","_iterator","Symbol","iterator","_iteratorNormalCompletion","_step","next","done","value","title","data","formattedScoresIndex","_iterator2","_iteratorNormalCompletion2","_step2","score","rank","hasOwnProperty","indexOf","x","y","hintTitle","hintValue","_formatHintValue","areScoresCached","scores","language","name","points","number","Number","isFinite","sortedKeys","sort","a","b","numberOfLanguages","_loop","includes","TopLanguagesChart","_oldValue","newValue","FastestGrowingLanguagesChart","oldValue","Math","round","MostGrowthLanguages","ChartFactory","chartType","CHART_TYPES","FASTEST_GROWTH","MOST_GROWTH","TOP_LANGUAGES","chart","Error","D3SigmoidCurve","context","compression","_context","_compression","prototype","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","closePath","point","lineTo","moveTo","that","bezierCurveTo","_prevX","_prevY","helpers_D3SigmoidCurve","custom","cardinal","Chart","props","_this","possibleConstructorReturn","getPrototypeOf","call","state","chartData","hoveredSeriesIndex","isLoading","showloadingMessage","setTimeout","setState","_onValueMouseOut","bind","assertThisInitialized","_onValueMouseOver","_xAxisLabelFormatter","loadChartData","prevProps","fromType","_chart","isSeriesCached","getSeries","series","leftYAxisLabels","_generateLeftYAxisLabels","rightYAxisLabels","_generateRightYAxisLabels","index","_value","_formatDateForLabel","react_default","createElement","Dimmer","Dimmable","blurring","dimmed","active","inverted","Loader","size","style","fontSize","marginTop","Image","src","_this2","_renderLoadingSpinner","d3sigmoidcurve","className","es","height","margin","left","right","yDomain","tickFormat","tickTotal","orientation","v","entry","curve","getNull","d","key","color","GitHubColors","get","opacity","onValueMouseOut","onValueMouseOver","datapoint","strokeWidth","lineStyle","pointerEvents","format","_formatHint","languageData","Component","ChartBottomMenu","Menu","secondary","Item","onClick","handleItemClick","ChartTopMenu","ChartGroup","handleChartTypeChanged","handleIntervalChanged","_event","_ref","_ref2","Container","Grid","centered","padded","Group","Content","Chart_Chart","Header","attached","borderless","fitted","header","position","Popup","on","trigger","icon","Icon","href","App","Header_Header","ChartGroup_ChartGroup","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","ReactDOM","render","components_App","document","getElementById","URL","origin","addEventListener","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"+WAAMA,EAAWC,EAAQ,IAEnBC,EAAeC,mCACfC,EAAYD,mEAyJHE,kJAtJWC,oGAAkBC,iCAAgBP,EAASO,cAC7DC,EAAQ,YACYH,EAAUI,sCAA9BC,kBACqBL,EAAUM,iCAA/BC,SAEKC,EAAI,cAAGA,EAAIN,yBACdG,GAAeE,wDAInBJ,EAAMM,KAAKJ,GACXA,EAAcL,EAAUU,mBAAmBL,EAAaJ,WANvBO,oDAS5BL,EAAMQ,mRAIPC,EAAY,CAChBC,MAAO,WACPC,MAAO,YAEiBd,EAAUe,SAASH,iBAAzCI,2BAEG,IAAIC,KAAKD,EAAc,GAAGE,0LAGAC,kFAC3BP,EAAY,CAChBC,MAAO,YACPC,MAAO,YAEiBd,EAAUe,SAASH,EAAWO,iBAApDH,2BAEG,IAAIC,KAAKD,EAAc,GAAGE,gJAGTA,EAAME,GAC9B,IAAIC,EAAU,IAAIJ,KAAKC,GAEvB,OADAG,EAAQC,YAAYD,EAAQE,cAAgBH,GACrCC,2EAGaG,EAAQL,gFACtBM,EAASC,UAAS,GAAAC,OAAI9B,EAAJ,uBAAA8B,OAAsCC,KAAKC,UAAUL,GAArD,kBAAAG,OAA6E5B,KAGjGoB,GAAiB,WAAYW,OAAOC,qCACrBC,MAAMP,UAAvBQ,gDAEoBjC,EAAUkC,0BAAxBC,mBACWA,EAAMC,MAAMX,cACL,qBADxBQ,4CAEQE,EAAME,IAAIZ,4BACCU,EAAMC,MAAMX,WAA7BQ,0CAIGA,EAASK,oQAKVC,EAAyBvC,EAAUwC,sCAC/BC,OAAOC,IAAIH,qDACNE,OAAOE,KAAKJ,kEAKSvC,EAAU4C,8CAAxCC,YACwBN,IAA0BvC,EAAU8C,sBAAsBP,qCAChFvC,EAAU+C,4CACHN,OAAOE,KAAKJ,qEAIdE,OAAOE,KAAKE,gOAGQG,mFACpBhD,EAAUiD,6BAA6BD,sCAA2BhD,EAAUkD,iRAGjDF,oFAClCG,EAAQ,CACZjC,KAAM8B,GAEFvB,EAASC,UAAS,GAAAC,OAAI9B,EAAJ,4BAAA8B,OAA2CC,KAAKC,UAAUsB,GAA1D,kBAAAxB,OAAiF5B,aAClFiC,MAAMP,iBAAvBQ,kBAEQA,EAASK,8CAAQc,0RAIRpB,MAAM,oHAAvBC,kBACkBA,EAASK,qBAA3Be,2BAECC,OAAOC,KAAKF,GAAWG,OAAO,SAACC,EAA2BC,GAI/D,OAHwC,IAApCL,EAAUK,GAAcC,UAC1BF,GAA6B,GAExBA,GACN,sJAIH,OAAO,IAAIxC,MAAO2C,cAAcC,MAAM,EAAG,sLAI3B7D,EAAUI,uBAAsB,0CAAOwD,cAAcC,MAAM,EAAG,gTAIhDpB,OAAOc,0GAA1BO,oBACDrB,OAAOsB,OAAOD,mdAIE3D,gFAClBS,EAAYZ,EAAUgE,gBAAgB7D,YAC/BH,EAAUe,SAASH,iLAGXT,GACrB,MAAO,CACLgD,MAAO,CACLc,GAAI9D,EAAM+D,IAAI,SAAAhD,GAAI,MAAK,CAAEA,KAAMA,MAGjCyC,QAAS,4FAIgBxD,sFACrBS,EAAYZ,EAAUgE,gBAAgB7D,GACtCsB,EAASC,UAAS,GAAAC,OAAI9B,EAAJ,uBAAA8B,OAAsCC,KAAKC,UAAUjB,GAArD,kBAAAe,OAAgF5B,IAClGwC,EAAyBvC,EAAUwC,sCAE/BC,OAAOC,IAAIH,sDACCE,OAAOE,KAAKJ,iBAA1BJ,mBAEgBA,EAAMC,MAAMX,uDAAa,sDAExC,mHCpJQ0C,aACnB,SAAAA,EAAYC,GAAWd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAH,GACrBG,KAAKC,UAAYH,iLAKHE,KAAKE,kEAA4BX,MAAM,0QAI1B,qBAAhBS,KAAKG,uCACIzE,EAAU0E,WAAWJ,KAAKC,UAAW5E,EAASO,cAAgB,UAA5EC,SAEJmE,KAAKG,OAAStE,EAAM+D,IAAI,SAAAhD,GAAI,OAAIA,EAAK0C,gDAGhCU,KAAKG,wRAIuBH,KAAKE,yCAAlCG,kBACsB3E,EAAU4E,aAAaD,iBAA7C3D,SACA6D,EAAeV,EAAeW,sBAAsB9D,GACpD+D,EAAqBT,KAAKU,uBAAuBH,EAAcF,aACzCL,KAAKW,0BAA3BC,mBACwBf,EAAegB,oBAAoBJ,EAAoBG,kBAA/EE,mBAC4Bd,KAAKe,oBAAoBD,EAAiBF,kBAAtEI,2BAECA,qJAqBcT,EAAcF,GAInC,IAHA,IAAII,EAAqB,GAGhBvE,EAAI,EAAGA,EAAImE,EAAqBY,OAAQ/E,IAAK,CACpD,IAAIU,EAAOyD,EAAqBnE,GAC5BgF,EAAeb,EAAqBnE,EAAI,GAG5C,IAAK,IAAIkD,KAFTqB,EAAmB7D,GAAQ,GAEF2D,EAAa3D,GAGpC,GAAI2D,EAAa3D,GAAMwC,GAAgB/D,EAAS8F,aAAc,CAC5D,IAAIC,EAAcpB,KAAKqB,sBACrBd,EAAaW,GAAc9B,GAC3BmB,EAAa3D,GAAMwC,IAIrBgC,EAAcvB,EAAeyB,wBAAwBF,GAErDX,EAAmB7D,GAAMwC,GAAgBgC,GAK/C,OAAOX,sFAgCiBc,EAAW1F,6GAInC,IAHI2F,EAAkB,GAChBC,EAAkB5B,EAAe6B,oBAAoBH,+BAE3DI,EAAyBF,EAAzBG,OAAAC,cAAAC,GAAAC,EAAAJ,EAAAK,QAAAC,MAAAH,GAAA,EAAS1C,EAAiC2C,EAAAG,MACxCV,EAAgBrF,KACd,CACEgG,MAAO/C,EACPgD,KAAM,4OAKHlG,EAAI,eAAGA,EAAIL,EAAMoF,yBAIxB,IAHIrE,EAAOf,EAAMK,GAEbmG,EAAuB,+BAC3BC,EAAyBb,EAAzBG,OAAAC,cAAAU,GAAAC,EAAAF,EAAAN,QAAAC,MAAAM,GAAA,EAASnD,EAAiCoD,EAAAN,MACpCO,EAAQ,KACRC,EAAO,KACPnB,EAAU3E,GAAM+F,eAAevD,KACjCqD,EAAQlB,EAAU3E,GAAMwC,GAExBsD,EAAO1D,OAAOC,KAAKsC,EAAU3E,IAAOgG,QAAQxD,GAAgB,GAG9DoC,EAAgBa,GAAsBD,KAAKjG,KACzC,CACE0G,EAAG3G,EAEH4G,EAAGJ,EAEHK,UAAW3D,EAEX4D,UAAWhD,KAAKiD,iBAAiBR,KAGrCJ,8OAxB8BnG,qDA4B3BsF,oUAkB4BxB,KAAKE,yCAAlCG,kBACO3E,EAAUwH,gBAAgB7C,6LAvIZ8C,GAE3B,IADA,IAAI5C,EAAe,GACVrE,EAAI,EAAGA,EAAIiH,EAAOlC,OAAQ/E,IAAK,CACtC,IAAMU,EAAOuG,EAAOjH,GAAGU,KACjBwC,EAAe+D,EAAOjH,GAAGkH,SAASC,KAClCC,EAASH,EAAOjH,GAAGoH,OAEpB/C,EAAaoC,eAAe/F,KAC/B2D,EAAa3D,GAAQ,IAEvB2D,EAAa3D,GAAMwC,GAAgBkE,EAGrC,OAAO/C,kDAiCsBgD,GAI7B,OAHKC,OAAOC,SAASF,KACnBA,EAAS,MAEJA,sFAGwBhD,EAAc1E,6EAG7C,IAFI0F,EAAY,cAEPrF,GACP,IAAIU,EAAOf,EAAMK,GAEjBqF,EAAU3E,GAAQ,GAOlB,IAJA,IAAI8G,EAAa1E,OAAOC,KAAKsB,EAAa3D,IAAO+G,KAAK,SAAUC,EAAGC,GACjE,OAAQtD,EAAa3D,GAAMiH,GAAKtD,EAAa3D,GAAMgH,KAG5C1H,EAAI,EAAGA,EAAIb,EAASyI,kBAAmB5H,IAAK,CACnD,IAAIkD,EAAesE,EAAWxH,GAC9BqF,EAAU3E,GAAMwC,GAAgBmB,EAAa3D,GAAMwC,KAZ9ClD,EAAI,EAAGA,EAAIL,EAAMoF,OAAQ/E,IAAK6H,EAA9B7H,4BAgBFqF,+IA+CkBA,GACzB,IAAIE,EAAkB,GAEtB,IAAK,IAAI7E,KAAQ2E,EACf,IAAK,IAAInC,KAAgBmC,EAAU3E,GAC5B6E,EAAgBuC,SAAS5E,IAC5BqC,EAAgBtF,KAAKiD,GAK3B,OAAOqC,WCpKUwC,gMACGC,EAAWC,GAC/B,OAAOA,2CAGQnB,GACf,OAAOA,SANoCnD,GCA1BuE,gMACGC,EAAUF,GAC9B,OAAOA,EAAWE,EAAW,6CAGdrB,GACf,SAAA3F,OAAUiH,KAAKC,MAAMvB,GAArB,mBANsDnD,GCArC2E,gMACGH,EAAUF,GAC9B,OAAOA,EAAWE,2CAGHrB,GACf,UAAA3F,OAAW2F,UANkCnD,GCE3C4E,gJACkBC,EAAW5E,8EAExB4E,gBACAD,EAAaE,YAAYC,wBAGzBH,EAAaE,YAAYE,qBAGzBJ,EAAaE,YAAYG,sCAL5BC,EAAQ,IAAIX,EAA6BtE,sCAGzCiF,EAAQ,IAAIP,EAAoB1E,sCAGhCiF,EAAQ,IAAId,EAAkBnE,qCAGxB,IAAIkF,MAAJ,uBAAA3H,OAAiCqH,qCAGpCK,6GAIXN,EAAaE,YAAc,CACzBC,eAAgB,gBAChBC,YAAa,aACbC,cAAe,gBAGFL,QChBf,SAASQ,EAAeC,EAASC,GAC/BnF,KAAKoF,SAAWF,EAChBlF,KAAKqF,aAAeF,EAGtBF,EAAeK,UAAY,CACzBC,UAAW,WACTvF,KAAKwF,MAAQ,GAEfC,QAAS,WACPzF,KAAKwF,MAAQE,KAEfC,UAAW,WACT3F,KAAK4F,OAAS,GAEhBC,QAAS,YACH7F,KAAKwF,OAAyB,IAAfxF,KAAKwF,OAA+B,IAAhBxF,KAAK4F,SAAe5F,KAAKoF,SAASU,YACzE9F,KAAKwF,MAAQ,EAAIxF,KAAKwF,OAExBO,MAAO,SAASlD,EAAGC,GAGjB,OAFAD,GAAKA,EACLC,GAAKA,EACG9C,KAAK4F,QACX,KAAK,EAAG5F,KAAK4F,OAAS,EAAG5F,KAAKwF,MAAQxF,KAAKoF,SAASY,OAAOnD,EAAGC,GAAK9C,KAAKoF,SAASa,OAAOpD,EAAGC,GAAI,MAC/F,KAAK,EAAG9C,KAAK4F,OAAS,EACtB,SAxCN,SAAeM,EAAMrD,EAAGC,GACtBoD,EAAKd,SAASe,cACZD,EAAKE,QAAWvD,EAAIqD,EAAKE,QAAUF,EAAKb,aACxCa,EAAKG,OACLxD,GAAMA,EAAIqD,EAAKE,QAAUF,EAAKb,aAC9BvC,EACAD,EACAC,GAiCWiD,CAAM/F,KAAM6C,EAAGC,GAE1B9C,KAAKoG,OAASvD,EACd7C,KAAKqG,OAASvD,IAIH,IAAAwD,EAAA,SAAUC,EAAOpB,GAC9B,SAASqB,EAAStB,GAChB,OAAO,IAAID,EAAeC,EAASC,GAOrC,OAJAqB,EAASrB,YAAc,SAASA,GAC9B,OAAOoB,EAAOpB,IAGTqB,EATM,CAUZ,KCrCkBC,6BACnB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAA3H,OAAAe,EAAA,EAAAf,CAAAgB,KAAAyG,IACjBE,EAAA3H,OAAA4H,EAAA,EAAA5H,CAAAgB,KAAAhB,OAAA6H,EAAA,EAAA7H,CAAAyH,GAAAK,KAAA9G,KAAM0G,KAEDK,MAAQ,CACXC,UAAW,KACXnL,MAAO,GACPmH,UAAW,KACXiE,mBAAoB,KACpBC,WAAW,EACXC,oBAAoB,GAKtBC,WAAW,WACTT,EAAKU,SAAS,CAACF,oBAAoB,KAIrC,KAEAR,EAAKW,iBAAmBX,EAAKW,iBAAiBC,KAAtBvI,OAAAwI,EAAA,EAAAxI,CAAA2H,IACxBA,EAAKc,kBAAoBd,EAAKc,kBAAkBF,KAAvBvI,OAAAwI,EAAA,EAAAxI,CAAA2H,IACzBA,EAAKe,qBAAuBf,EAAKe,qBAAqBH,KAA1BvI,OAAAwI,EAAA,EAAAxI,CAAA2H,IAvBXA,2MA2BX3G,KAAK2H,qMAGYC,sEAEnB5H,KAAK0G,MAAMhC,YAAckD,EAAUlD,WACnC1E,KAAK0G,MAAM/K,mBAAqBiM,EAAUjM,iDACtCqE,KAAK2H,iSAKOlD,EAAaoD,SAAS7H,KAAK0G,MAAMhC,UAAW1E,KAAK0G,MAAM/K,gCAA3EqE,KAAK8H,uBAEwB9H,KAAK8H,OAAOC,+BAAnCA,SAGN/H,KAAKqH,SAAS,CACZH,WAAYa,aAGM/H,KAAK8H,OAAOnH,yBAA1B9E,mBACemE,KAAK8H,OAAOE,oBAA3BC,SAEAC,EAAkBzB,EAAM0B,yBAAyBF,GACjDG,EAAmB3B,EAAM4B,0BAA0BJ,GAGzDjI,KAAKqH,SAAS,CACZL,UAAWiB,EACXpM,MAAOA,EACPqL,WAAW,EACXgB,gBAAiBA,EACjBE,iBAAkBA,EAClBjB,oBAAoB,2IAyBZjF,GACV,MAAO,CACL,CACEC,MAAOD,EAAMa,UACbb,MAAOA,EAAMc,uDAMjBhD,KAAKqH,SAAS,CACZrE,UAAW,KACXiE,mBAAoB,iDAIN/E,EAAOoG,GACvBtI,KAAKqH,SAAS,CACZrE,UAAWd,EACX+E,mBAAoBqB,iDAKHC,EAAQD,GAC3B,OAAO7B,EAAM+B,oBAAoBxI,KAAK+G,MAAMlL,MAAMyM,oDAQlD,OACEG,EAAA7E,EAAA8E,cAACC,EAAA,EAAOC,SAAR,CAAiBC,UAAQ,EAACC,QAAM,GAC9BL,EAAA7E,EAAA8E,cAACC,EAAA,EAAD,CAAQI,QAAM,EAACC,UAAQ,GACrBP,EAAA7E,EAAA8E,cAACO,EAAA,EAAD,CAAQC,KAAK,WACVlJ,KAAK+G,MAAMI,oBACVsB,EAAA7E,EAAA8E,cAAA,0BAEED,EAAA7E,EAAA8E,cAAA,OAAKS,MAAO,CAACC,SAAU,QAASC,UAAW,UAA3C,uDAQRZ,EAAA7E,EAAA8E,cAACY,EAAA,EAAD,CAAOC,IAAI,0EAKR,IAAAC,EAAAxJ,KACP,GAAIA,KAAK+G,MAAMG,YAAclH,KAAK+G,MAAMC,UACtC,OAAOhH,KAAKyJ,wBAGZ,IAAMC,EAAiBzE,EAAeE,YAAY,IAClD,OACEsD,EAAA7E,EAAA8E,cAAA,OAAKiB,UAAU,mBACblB,EAAA7E,EAAA8E,cAAA,OAAKiB,UAAU,iBACblB,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CACEC,OAAqC,GAA7BxO,EAASyI,kBACjBgG,OAAQ,CACNC,KAAM,GACNC,MAAO,IAGTC,QAAS,CAAC5O,EAASyI,kBAAmB,IAEtC2E,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,MACAnB,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,MACAnB,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CAAOM,WAAYlK,KAAK0H,qBAAsByC,UAAWnK,KAAK+G,MAAMlL,MAAMoF,SAC1EwH,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CAAOQ,YAAY,OAAOF,WAAY,SAACG,EAAGnO,GAAJ,OAAUsN,EAAKzC,MAAMmB,gBAAgBhM,MAC3EuM,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CAAOQ,YAAY,QAAQF,WAAY,SAACG,EAAGnO,GAAJ,OAAUsN,EAAKzC,MAAMqB,iBAAiBlM,MAC5E8D,KAAK+G,MAAMC,UAAUpH,IAAI,SAAC0K,EAAOpO,GAAR,OACxBuM,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CACEW,MAAOb,EACPc,QAAS,SAACC,GAAD,OAAe,OAARA,EAAE3H,GAClB4H,IAAKJ,EAAMnI,MACXwI,MAAOC,IAAaC,IAAIP,EAAMnI,OAAO,GAAMwI,MAC3CvI,KAAMkI,EAAMlI,KACZ0I,QAA2C,OAAlCtB,EAAKzC,MAAME,oBAA+BuC,EAAKzC,MAAME,qBAAuB/K,EAAI,EAAI,GAC7F6O,gBAAiBvB,EAAKlC,iBACtB0D,iBAAkB,SAACC,GAAD,OAAezB,EAAK/B,kBAAkBwD,EAAW/O,IACnEgP,YAA+C,OAAlC1B,EAAKzC,MAAME,oBAA+BuC,EAAKzC,MAAME,qBAAuB/K,EAAI,EAAI,KACjGiP,UAAW,CAACC,cAAe,YAG9BpL,KAAK+G,MAAM/D,WACVyF,EAAA7E,EAAA8E,cAACkB,EAAA,EAAD,CACEyB,OAAQrL,KAAKsL,YACbpJ,MAAOlC,KAAK+G,MAAM/D,kEAlHFiF,GAC9B,OAAOA,EAEJrI,IAAI,SAAA2L,GAAY,OAAIA,EAAanJ,KAAK,KAEtCuB,KAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAEf,EAAIc,EAAEd,IAEvBlD,IAAI,SAAA2L,GAAY,OAAIA,GAAgBA,EAAaxI,8DAIrBkF,GAC/B,OAAOA,EAEJrI,IAAI,SAAA2L,GAAY,OAAIA,EAAanJ,KAAKmJ,EAAanJ,KAAKnB,OAAS,KAEjE0C,KAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAEf,EAAIc,EAAEd,IAEvBlD,IAAI,SAAA2L,GAAY,OAAIA,GAAgBA,EAAaxI,wDA+B3BnG,GACzB,OAAOA,EAAK2C,MAAM,EAAG,UApHUiM,uBCjBpB,SAASC,EAAgB/E,GACtC,IAAM/K,EAAmB+K,EAAM/K,iBAE/B,OACE8M,EAAA7E,EAAA8E,cAACgD,EAAA,EAAD,CAAMC,WAAS,GACblD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAWvI,KAAK,UAAUnB,MAAM,IAAI6G,OAA6B,IAArBpN,EAAwBkQ,QAASnF,EAAMoF,kBACnFrD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAWvI,KAAK,YAAYnB,MAAM,IAAI6G,OAA6B,IAArBpN,EAAwBkQ,QAASnF,EAAMoF,kBACrFrD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAWvI,KAAK,SAASnB,MAAM,KAAK6G,OAA6B,KAArBpN,EAAyBkQ,QAASnF,EAAMoF,mBCL3E,SAASC,EAAarF,GACnC,IAAMhC,EAAYgC,EAAMhC,UAExB,OACE+D,EAAA7E,EAAA8E,cAACgD,EAAA,EAAD,CAAMC,WAAS,GACblD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CACEvI,KAAMoB,EAAaE,YAAYC,eAC/BmE,OAAQrE,IAAcD,EAAaE,YAAYC,eAC/CiH,QAASnF,EAAMoF,iBAHjB,kBAKArD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CACEvI,KAAMoB,EAAaE,YAAYE,YAC/BkE,OAAQrE,IAAcD,EAAaE,YAAYE,YAC/CgH,QAASnF,EAAMoF,iBAHjB,eAKArD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CACEvI,KAAMoB,EAAaE,YAAYG,cAC/BiE,OAAQrE,IAAcD,EAAaE,YAAYG,cAC/C+G,QAASnF,EAAMoF,iBAHjB,mBCVeE,cACnB,SAAAA,EAAYtF,GAAO,IAAAC,EAAA,OAAA3H,OAAAe,EAAA,EAAAf,CAAAgB,KAAAgM,IACjBrF,EAAA3H,OAAA4H,EAAA,EAAA5H,CAAAgB,KAAAhB,OAAA6H,EAAA,EAAA7H,CAAAgN,GAAAlF,KAAA9G,KAAM0G,KAEDK,MAAQ,CACXrC,UAAWD,EAAaE,YAAYE,YACpClJ,iBAAkB,GAGpBgL,EAAKsF,uBAAyBtF,EAAKsF,uBAAuB1E,KAA5BvI,OAAAwI,EAAA,EAAAxI,CAAA2H,IAC9BA,EAAKuF,sBAAwBvF,EAAKuF,sBAAsB3E,KAA3BvI,OAAAwI,EAAA,EAAAxI,CAAA2H,IATZA,sFAYIwF,KAAkB,IAAR9I,EAAQ+I,EAAR/I,KAC/BrD,KAAKqH,SAAS,CAAE3C,UAAWrB,kDAGP8I,KAAmB,IAATjK,EAASmK,EAATnK,MAC9BlC,KAAKqH,SAAS,CAAE1L,iBAAkB6H,OAAOtB,sCAIzC,OACEuG,EAAA7E,EAAA8E,cAAC4D,EAAA,EAAD,KACE7D,EAAA7E,EAAA8E,cAAC6D,EAAA,EAAD,CAAMC,UAAQ,EAACC,QAAM,GACnBhE,EAAA7E,EAAA8E,cAACkD,EAAA,EAAKc,MAAN,CAAY/C,UAAU,eACpBlB,EAAA7E,EAAA8E,cAACkD,EAAA,EAAKe,QAAN,KACElE,EAAA7E,EAAA8E,cAAC6D,EAAA,EAAD,CAAMC,UAAQ,EAACC,QAAM,GACnBhE,EAAA7E,EAAA8E,cAACqD,EAAD,CACErH,UAAW1E,KAAK+G,MAAMrC,UACtBoH,gBAAiB9L,KAAKiM,0BAG1BxD,EAAA7E,EAAA8E,cAACkE,EAAD,CACElI,UAAW1E,KAAK+G,MAAMrC,UACtB/I,iBAAkBqE,KAAK+G,MAAMpL,mBAE/B8M,EAAA7E,EAAA8E,cAAC6D,EAAA,EAAD,CAAMC,UAAQ,EAACC,QAAM,GACnBhE,EAAA7E,EAAA8E,cAAC+C,EAAD,CACEK,gBAAiB9L,KAAKkM,sBACtBvQ,iBAAkBqE,KAAK+G,MAAMpL,+BAxCP6P,8BCPnBqB,mLAEjB,OACEpE,EAAA7E,EAAA8E,cAACgD,EAAA,EAAD,CAAMoB,UAAQ,EAACC,YAAU,EAAC/D,UAAQ,GAChCP,EAAA7E,EAAA8E,cAAC4D,EAAA,EAAD,KACE7D,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAWoB,OAAO,eAAeC,QAAM,GAAvC,+BAIAxE,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKA,KAAN,CAAWwB,SAAS,SAClBzE,EAAA7E,EAAA8E,cAACyE,EAAA,EAAD,CACEC,GAAG,QACHC,QACE5E,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAW0B,MAAI,GACb7E,EAAA7E,EAAA8E,cAAC6E,EAAA,EAAD,CAAMlK,KAAK,cAAc6F,KAAK,UAIlCT,EAAA7E,EAAA8E,cAACyE,EAAA,EAAMR,QAAP,KACElE,EAAA7E,EAAA8E,cAAA,wCACAD,EAAA7E,EAAA8E,cAAA,qNAMAD,EAAA7E,EAAA8E,cAAA,4BACAD,EAAA7E,EAAA8E,cAAA,oIAGED,EAAA7E,EAAA8E,cAAA,KAAG8E,KAAK,0EAAR,kBAHF,+BAM+B,IAC7B/E,EAAA7E,EAAA8E,cAAA,KAAG8E,KAAK,0BAAR,eAPF,KASA/E,EAAA7E,EAAA8E,cAAA,wBACAD,EAAA7E,EAAA8E,cAAA,uFAIAD,EAAA7E,EAAA8E,cAAA,iBACAD,EAAA7E,EAAA8E,cAAA,kFAMJD,EAAA7E,EAAA8E,cAACgD,EAAA,EAAKE,KAAN,CAAW4B,KAAK,wCAAwCF,MAAI,GAC1D7E,EAAA7E,EAAA8E,cAAC6E,EAAA,EAAD,CAAMlK,KAAK,SAAS6F,KAAK,mBAjDHsC,aCarBiC,mLATX,OACEhF,EAAA7E,EAAA8E,cAAA,OAAKiB,UAAU,OACblB,EAAA7E,EAAA8E,cAACgF,EAAD,MACAjF,EAAA7E,EAAA8E,cAACiF,EAAD,cALUnC,aCKZoC,EAAcC,QACW,cAA7BrQ,OAAOsQ,SAASC,UAEe,UAA7BvQ,OAAOsQ,SAASC,UAEhBvQ,OAAOsQ,SAASC,SAASjQ,MACvB,2DAsCN,SAASkQ,EAAgBC,GACvBC,UAAUC,cACPC,SAASH,GACTI,KAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBzH,QACfmH,UAAUC,cAAcQ,WAK1BC,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,2CAMrBC,MAAM,SAAAC,GACLH,QAAQG,MAAM,4CAA6CA,KC1EjEC,IAASC,OAAOxG,EAAA7E,EAAA8E,cAACwG,EAAD,MAASC,SAASC,eAAe,SDelC,WACb,GAA6C,kBAAmBlB,UAAW,CAGzE,GADkB,IAAImB,IAAI7T,cAAwBgC,OAAOsQ,UAC3CwB,SAAW9R,OAAOsQ,SAASwB,OAIvC,OAGF9R,OAAO+R,iBAAiB,OAAQ,WAC9B,IAAMtB,EAAK,GAAA5Q,OAAM7B,cAAN,sBAEPoS,GAiDV,SAAiCK,GAE/BvQ,MAAMuQ,GACHI,KAAK,SAAA1Q,GAGkB,MAApBA,EAAS6R,SACuD,IAAhE7R,EAAS8R,QAAQ5E,IAAI,gBAAgBjI,QAAQ,cAG7CsL,UAAUC,cAAcuB,MAAMrB,KAAK,SAAAC,GACjCA,EAAaqB,aAAatB,KAAK,WAC7B7Q,OAAOsQ,SAAS8B,aAKpB5B,EAAgBC,KAGnBa,MAAM,WACLF,QAAQC,IACN,mEArEAgB,CAAwB5B,GAIxBC,UAAUC,cAAcuB,MAAMrB,KAAK,WACjCO,QAAQC,IACN,+GAMJb,EAAgBC,MC1CxB6B","file":"static/js/main.819875d3.chunk.js","sourcesContent":["const settings = require('../settings.json');\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000';\nconst API_TOKEN = process.env.REACT_APP_API_TOKEN || null;\n\nclass ApiHelper {\n  static async buildDates(intervalInMonths, numberOfDates = settings.numberOfDates) {\n    let dates = [];\n    let currentDate = await ApiHelper._getLatestDateFromApi();\n    let earliestDate = await ApiHelper._getEarliestDateFromApi();\n\n    for (let i = 0; i < numberOfDates; i++) {\n      if (currentDate <= earliestDate) {\n        break;\n      }\n\n      dates.push(currentDate);\n      currentDate = ApiHelper._subtractMonthsUTC(currentDate, intervalInMonths);\n    }\n\n    return dates.reverse();\n  }\n\n  static async _getEarliestDateFromApi() {\n    const apiFilter = {\n      order: 'date ASC',\n      limit: 1\n    };\n    let scoresFromApi = await ApiHelper._callApi(apiFilter);\n\n    return new Date(scoresFromApi[0].date);\n  }\n\n  static async _getLatestDateFromApi(bypassCache) {\n    const apiFilter = {\n      order: 'date DESC',\n      limit: 1\n    };\n    let scoresFromApi = await ApiHelper._callApi(apiFilter, bypassCache);\n\n    return new Date(scoresFromApi[0].date);\n  }\n\n  static _subtractMonthsUTC(date, monthsToSubtract) {\n    let newDate = new Date(date);\n    newDate.setUTCMonth(newDate.getUTCMonth() - monthsToSubtract);\n    return newDate;\n  }\n\n  static async _callApi(filter, bypassCache) {\n    const apiUrl = encodeURI(`${API_BASE_URL}/api/scores?filter=${JSON.stringify(filter)}&access_token=${API_TOKEN}`);\n    let response;\n\n    if (bypassCache || !('caches' in window.self)) {\n      response = await fetch(apiUrl);\n    } else {\n      const cache = await ApiHelper._getCache();\n      response = await cache.match(apiUrl);\n      if (typeof response === 'undefined') {\n        await cache.add(apiUrl);\n        response = await cache.match(apiUrl);\n      }\n    }\n\n    return response.json();\n  }\n\n  static async _getCache() {\n    // If there's a cache matching the current year/month, return it\n    const currentYearMonthString = ApiHelper._getCurrentYearMonthString();\n    if (await caches.has(currentYearMonthString)) {\n      return await caches.open(currentYearMonthString);\n    }\n\n    // If the latest year/month in the API is current and the API is finished syncing,\n    // delete all old caches and return a new one for the current year/month\n    const latestYearMonthString = await ApiHelper._getLatestYearMonthStringFromApi();\n    if (latestYearMonthString === currentYearMonthString && ApiHelper._isApiFinishedSyncing(currentYearMonthString)) {\n      await ApiHelper._deleteAllCaches();\n      return await caches.open(currentYearMonthString);\n    }\n\n    // If we end up here, return a cache for the latest year/month in the API\n    return await caches.open(latestYearMonthString);\n  }\n\n  static async _isApiFinishedSyncing(yearMonthString) {\n    return await ApiHelper._getNumberOfLanguagesFromApi(yearMonthString) === await ApiHelper._getTotalNumberOfLanguages();\n  }\n\n  static async _getNumberOfLanguagesFromApi(yearMonthString) {\n    const where = {\n      date: yearMonthString\n    };\n    const apiUrl = encodeURI(`${API_BASE_URL}/api/scores/count?where=${JSON.stringify(where)}&access_token=${API_TOKEN}`);\n    const response = await fetch(apiUrl);\n\n    return (await response.json()).count;\n  }\n\n  static async _getTotalNumberOfLanguages() {\n    const response = await fetch('https://raw.githubusercontent.com/bmaupin/langtrends-api/master/server/boot/classes/languages.json');\n    const languages = await response.json();\n\n    return Object.keys(languages).reduce((numberOfIncludedLanguages, languageName) => {\n      if (languages[languageName].include === true) {\n        numberOfIncludedLanguages += 1;\n      }\n      return numberOfIncludedLanguages;\n    }, 0);\n  }\n\n  static _getCurrentYearMonthString() {\n    return new Date().toISOString().slice(0, 7);\n  }\n\n  static async _getLatestYearMonthStringFromApi() {\n    return (await ApiHelper._getLatestDateFromApi(true)).toISOString().slice(0, 7);\n  }\n\n  static async _deleteAllCaches() {\n    for (let cacheName of await caches.keys()) {\n      await caches.delete(cacheName);\n    }\n  }\n\n  static async getAllScores(dates) {\n    const apiFilter = ApiHelper._buildApiFilter(dates);\n    return await ApiHelper._callApi(apiFilter);\n  }\n\n  static _buildApiFilter(dates) {\n    return {\n      where: {\n        or: dates.map(date => ({ date: date }))\n      },\n      // This makes sure the language details get included. In particular we need the language name for labels\n      include: 'language',\n    };\n  }\n\n  static async areScoresCached(dates) {\n    const apiFilter = ApiHelper._buildApiFilter(dates);\n    const apiUrl = encodeURI(`${API_BASE_URL}/api/scores?filter=${JSON.stringify(apiFilter)}&access_token=${API_TOKEN}`);\n    const currentYearMonthString = ApiHelper._getCurrentYearMonthString();\n\n    if (await caches.has(currentYearMonthString)) {\n      const cache = await caches.open(currentYearMonthString);\n      // cache.match will return undefined if the URL isn't cached\n      return (typeof (await cache.match(apiUrl)) !== 'undefined');\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default ApiHelper;\n","import ApiHelper from './ApiHelper';\nimport settings from '../settings.json';\n\nexport default class LanguagesChart {\n  constructor(interval) {\n    this._interval = interval;\n  }\n\n  async getDates() {\n    // We need one extra date internally for calculations, so to avoid extra API calls just drop the extra date\n    return (await this._getDatesForCalculations()).slice(1);\n  }\n\n  async _getDatesForCalculations() {\n    if (typeof this._dates === 'undefined') {\n      let dates = await ApiHelper.buildDates(this._interval, settings.numberOfDates + 1);\n      // From this point on we only need the date as a string\n      this._dates = dates.map(date => date.toISOString());\n    }\n\n    return this._dates;\n  }\n\n  async getSeries() {\n    const datesForCalculations = await this._getDatesForCalculations();\n    const scoresFromApi = await ApiHelper.getAllScores(datesForCalculations);\n    const scoresByDate = LanguagesChart._organizeScoresByDate(scoresFromApi);\n    const customScoresByDate = this._getCustomScoresByDate(scoresByDate, datesForCalculations);\n    const datesForChart = await this.getDates();\n    const topCustomScores = await LanguagesChart._calculateTopScores(customScoresByDate, datesForChart);\n    const formattedSeriesData = await this._formatDataForChart(topCustomScores, datesForChart);\n\n    return formattedSeriesData;\n  }\n\n  // Organize scores by date so we can access each one directly\n  static _organizeScoresByDate(scores) {\n    let scoresByDate = {};\n    for (let i = 0; i < scores.length; i++) {\n      const date = scores[i].date;\n      const languageName = scores[i].language.name;\n      const points = scores[i].points;\n\n      if (!scoresByDate.hasOwnProperty(date)) {\n        scoresByDate[date] = {};\n      }\n      scoresByDate[date][languageName] = points;\n    }\n\n    return scoresByDate;\n  }\n\n  // Convert raw scores into custom scores (percentage change, score difference, etc)\n  _getCustomScoresByDate(scoresByDate, datesForCalculations) {\n    let customScoresByDate = {};\n\n    // Start from 1 because the previous date is just used for calculating the custom score\n    for (let i = 1; i < datesForCalculations.length; i++) {\n      let date = datesForCalculations[i];\n      let previousDate = datesForCalculations[i - 1];\n      customScoresByDate[date] = {};\n\n      for (let languageName in scoresByDate[date]) {\n        // TODO: Filter by scores where the most recent score is above the minimum??\n        // if (scoresByDate[datesForCalculations[datesForCalculations.length - 1]][languageName] > settings.minimumScore) {\n        if (scoresByDate[date][languageName] > settings.minimumScore) {\n          let customScore = this._calculateCustomScore(\n            scoresByDate[previousDate][languageName],\n            scoresByDate[date][languageName]\n          );\n\n          // percentage change could be NaN or Infinity, but react-vis can only handle numbers or null\n          customScore = LanguagesChart._convertNonFiniteToNull(customScore);\n\n          customScoresByDate[date][languageName] = customScore;\n        }\n      }\n    }\n\n    return customScoresByDate;\n  }\n\n  static _convertNonFiniteToNull(number) {\n    if (!Number.isFinite(number)) {\n      number = null;\n    }\n    return number;\n  }\n\n  static async _calculateTopScores(scoresByDate, dates) {\n    let topScores = {};\n\n    for (let i = 0; i < dates.length; i++) {\n      let date = dates[i];\n      // TODO: make this a map to guarantee order\n      topScores[date] = {};\n\n      // Sort scores so we can get the top N and do an ordinal ranking for a bump chart\n      let sortedKeys = Object.keys(scoresByDate[date]).sort(function (a, b) {\n        return (scoresByDate[date][b] - scoresByDate[date][a]);\n      });\n\n      for (let i = 0; i < settings.numberOfLanguages; i++) {\n        let languageName = sortedKeys[i];\n        topScores[date][languageName] = scoresByDate[date][languageName];\n      }\n    }\n\n    return topScores;\n  }\n\n  async _formatDataForChart(topScores, dates) {\n    let formattedScores = [];\n    const allTopLanguages = LanguagesChart._getAllTopLanguages(topScores);\n\n    for (let languageName of allTopLanguages) {\n      formattedScores.push(\n        {\n          title: languageName,\n          data: [],\n        }\n      );\n    }\n\n    for (let i = 0; i < dates.length; i++) {\n      let date = dates[i];\n\n      let formattedScoresIndex = 0;\n      for (let languageName of allTopLanguages) {\n        let score = null;\n        let rank = null;\n        if (topScores[date].hasOwnProperty(languageName)) {\n          score = topScores[date][languageName];\n          // TODO: this should be a map to guarantee order\n          rank = Object.keys(topScores[date]).indexOf(languageName) + 1;\n        }\n\n        formattedScores[formattedScoresIndex].data.push(\n          {\n            x: i,\n            // Use the ordinal number ranking for the chart data in order to create a bump chart\n            y: rank,\n            // TODO: don't add hintTitle and hintValue if score is null\n            hintTitle: languageName,\n            // Add the custom score as a separate property so it can be used for hints on mouseover\n            hintValue: this._formatHintValue(score),\n          }\n        );\n        formattedScoresIndex ++;\n      }\n    }\n\n    return formattedScores;\n  }\n\n  static _getAllTopLanguages(topScores) {\n    let allTopLanguages = [];\n\n    for (let date in topScores) {\n      for (let languageName in topScores[date]) {\n        if (!allTopLanguages.includes(languageName)) {\n          allTopLanguages.push(languageName);\n        }\n      }\n    }\n\n    return allTopLanguages;\n  }\n\n  async isSeriesCached() {\n    const datesForCalculations = await this._getDatesForCalculations();\n    return await ApiHelper.areScoresCached(datesForCalculations);\n  }\n}\n","import LanguagesChart from './LanguagesChart';\n\nexport default class TopLanguagesChart extends LanguagesChart {\n  _calculateCustomScore(_oldValue, newValue) {\n    return newValue;\n  }\n\n  _formatHintValue(hintValue) {\n    return hintValue;\n  }\n}\n","import LanguagesChart from './LanguagesChart';\n\nexport default class FastestGrowingLanguagesChart extends LanguagesChart {\n  _calculateCustomScore(oldValue, newValue) {\n    return newValue / oldValue * 100;\n  }\n\n  _formatHintValue(hintValue) {\n    return `${Math.round(hintValue)}% growth`;\n  }\n}\n","import LanguagesChart from './LanguagesChart';\n\nexport default class MostGrowthLanguages extends LanguagesChart {\n  _calculateCustomScore(oldValue, newValue) {\n    return newValue - oldValue;\n  }\n\n  _formatHintValue(hintValue) {\n    return `+${hintValue}`;\n  }\n}\n","import TopLanguagesChart from './TopLanguagesChart';\nimport FastestGrowingLanguagesChart from './FastestGrowingLanguagesChart';\nimport MostGrowthLanguages from './MostGrowthLanguages';\n\nclass ChartFactory {\n  static async fromType(chartType, interval) {\n    let chart;\n    switch(chartType) {\n      case ChartFactory.CHART_TYPES.FASTEST_GROWTH:\n        chart = new FastestGrowingLanguagesChart(interval);\n        break;\n      case ChartFactory.CHART_TYPES.MOST_GROWTH:\n        chart = new MostGrowthLanguages(interval);\n        break;\n      case ChartFactory.CHART_TYPES.TOP_LANGUAGES:\n        chart = new TopLanguagesChart(interval);\n        break;\n      default:\n        throw new Error(`Unknown chart type: ${chartType}`);\n    }\n\n    return chart;\n  }\n}\n\nChartFactory.CHART_TYPES = {\n  FASTEST_GROWTH: 'fastestgrowth',\n  MOST_GROWTH: 'mostgrowth',\n  TOP_LANGUAGES: 'toplanguages',\n};\n\nexport default ChartFactory;\n","function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._prevX + ((x - that._prevX) * that._compression),\n    that._prevY,\n    x - ((x - that._prevX) * that._compression),\n    y,\n    x,\n    y,\n  );\n}\n\n// I'm not sure if \"compression\" is the proper mathematical term...\n// A compression between 0 (straight lines) and 1 will give the best results\n// The closer you approach 1, the cleaner the lines will look but the more difficult it will be to distinguish between\n// multiple lines\nfunction D3SigmoidCurve(context, compression) {\n  this._context = context;\n  this._compression = compression;\n}\n\nD3SigmoidCurve.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x;\n    y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: point(this, x, y); break;\n    }\n    this._prevX = x;\n    this._prevY = y;\n  },\n};\n\nexport default (function custom(compression) {\n  function cardinal(context) {\n    return new D3SigmoidCurve(context, compression);\n  }\n\n  cardinal.compression = function(compression) {\n    return custom(compression);\n  };\n\n  return cardinal;\n})(0.75);\n","import GitHubColors from 'github-colors';\nimport React, { Component } from 'react';\nimport {\n  FlexibleWidthXYPlot,\n  Hint,\n  HorizontalGridLines,\n  LineMarkSeries,\n  VerticalGridLines,\n  XAxis,\n  YAxis\n} from 'react-vis';\nimport { Dimmer, Loader, Image } from 'semantic-ui-react';\n\nimport ChartFactory from '../helpers/ChartFactory';\nimport D3SigmoidCurve from '../helpers/D3SigmoidCurve';\nimport settings from '../settings.json';\n\nimport './Chart.css';\nimport '../../node_modules/react-vis/dist/style.css';\n\nexport default class Chart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chartData: null,\n      dates: [],\n      hintValue: null,\n      hoveredSeriesIndex: null,\n      isLoading: true,\n      showloadingMessage: false,\n    };\n\n    // Don't show the loading message right away because it can create a lot of visual noise if the loading spinner\n    // only briefly flashes\n    setTimeout(() => {\n      this.setState({showloadingMessage: true});\n    },\n    // This should be just long enough so it only shows when the API isn't ready but doesn't show in any other\n    // situations, such as when changing chart types when the data isn't cached yet\n    4000);\n\n    this._onValueMouseOut = this._onValueMouseOut.bind(this);\n    this._onValueMouseOver = this._onValueMouseOver.bind(this);\n    this._xAxisLabelFormatter = this._xAxisLabelFormatter.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.loadChartData();\n  }\n\n  async componentDidUpdate(prevProps) {\n    // These conditionals prevent some extra flashing and wonkiness caused by reloading the chart data too aggressively\n    if (this.props.chartType !== prevProps.chartType ||\n        this.props.intervalInMonths !== prevProps.intervalInMonths) {\n      await this.loadChartData();\n    }\n  }\n\n  async loadChartData() {\n    this._chart = await ChartFactory.fromType(this.props.chartType, this.props.intervalInMonths);\n\n    const isSeriesCached = await this._chart.isSeriesCached();\n    // Use to show the loading spinner if the data isn't cached so the user has some feedback that it's being loaded,\n    // but if the data is cached we don't want to show the loading spinner because it causes an annoying flash\n    this.setState({\n      isLoading: !isSeriesCached,\n    });\n\n    const dates = await this._chart.getDates();\n    const series = await this._chart.getSeries();\n\n    const leftYAxisLabels = Chart._generateLeftYAxisLabels(series);\n    const rightYAxisLabels = Chart._generateRightYAxisLabels(series);\n\n    // TODO: just one object for chart data?\n    this.setState({\n      chartData: series,\n      dates: dates,\n      isLoading: false,\n      leftYAxisLabels: leftYAxisLabels,\n      rightYAxisLabels: rightYAxisLabels,\n      showloadingMessage: false,\n    });\n  }\n\n  static _generateLeftYAxisLabels(series) {\n    return series\n      // Get just the data for the first date\n      .map(languageData => languageData.data[0])\n      // Sort in reverse order because the y values are ordinal ranks (1 should be first, not 10)\n      .sort((a, b) => b.y - a.y)\n      // Drop everything else (x value, y value) and return just a list of hint titles\n      .map(languageData => languageData && languageData.hintTitle);\n  }\n\n  // TODO: remove duplication here?\n  static _generateRightYAxisLabels(series) {\n    return series\n      // Get just the data for the last date\n      .map(languageData => languageData.data[languageData.data.length - 1])\n      // Sort in reverse order because the y values are ordinal ranks (1 should be first, not 10)\n      .sort((a, b) => b.y - a.y)\n      // Drop everything else (x value, y value) and return just a list of hint titles\n      .map(languageData => languageData && languageData.hintTitle);\n  }\n\n  _formatHint(value) {\n    return [\n      {\n        title: value.hintTitle,\n        value: value.hintValue,\n      }\n    ];\n  }\n\n  _onValueMouseOut() {\n    this.setState({\n      hintValue: null,\n      hoveredSeriesIndex: null,\n    });\n  }\n\n  _onValueMouseOver(value, index) {\n    this.setState({\n      hintValue: value,\n      hoveredSeriesIndex: index,\n    });\n  }\n\n  // TODO: could we just format the dates ahead of time and get rid of this method?\n  _xAxisLabelFormatter(_value, index) {\n    return Chart._formatDateForLabel(this.state.dates[index]);\n  }\n\n  static _formatDateForLabel(date) {\n    return date.slice(0, 7);\n  }\n\n  _renderLoadingSpinner() {\n    return (\n      <Dimmer.Dimmable blurring dimmed>\n        <Dimmer active inverted>\n          <Loader size='massive'>\n            {this.state.showloadingMessage &&\n              <span>\n                Please wait\n                <div style={{fontSize: '0.6em', marginTop: '0.5em'}}>\n                  (The backend may take up to 30 seconds to start)\n                </div>\n              </span>\n            }\n          </Loader>\n        </Dimmer>\n\n        <Image src='assets/images/chart-placeholder.png' />\n      </Dimmer.Dimmable>\n    );\n  }\n\n  render() {\n    if (this.state.isLoading || !this.state.chartData) {\n      return this._renderLoadingSpinner();\n\n    } else {\n      const d3sigmoidcurve = D3SigmoidCurve.compression(0.5);\n      return (\n        <div className=\"chart-container\">\n          <div className=\"chart-content\">\n            <FlexibleWidthXYPlot\n              height={settings.numberOfLanguages * 49}\n              margin={{\n                left: 80,\n                right: 80\n              }}\n              // Reverse the y scale since we're doing a bump chart\n              yDomain={[settings.numberOfLanguages, 1]}\n            >\n              <VerticalGridLines />\n              <HorizontalGridLines />\n              <XAxis tickFormat={this._xAxisLabelFormatter} tickTotal={this.state.dates.length} />\n              <YAxis orientation=\"left\" tickFormat={(v, i) => this.state.leftYAxisLabels[i]} />\n              <YAxis orientation=\"right\" tickFormat={(v, i) => this.state.rightYAxisLabels[i]} />\n              {this.state.chartData.map((entry, i) =>\n                <LineMarkSeries\n                  curve={d3sigmoidcurve}\n                  getNull={(d) => d.y !== null}\n                  key={entry.title}\n                  color={GitHubColors.get(entry.title, true).color}\n                  data={entry.data}\n                  opacity={this.state.hoveredSeriesIndex === null || this.state.hoveredSeriesIndex === i ? 1 : 0.5}\n                  onValueMouseOut={this._onValueMouseOut}\n                  onValueMouseOver={(datapoint) => this._onValueMouseOver(datapoint, i)}\n                  strokeWidth={this.state.hoveredSeriesIndex !== null && this.state.hoveredSeriesIndex === i ? 4 : null}\n                  lineStyle={{pointerEvents: 'none'}}\n                />\n              )}\n              {this.state.hintValue &&\n                <Hint\n                  format={this._formatHint}\n                  value={this.state.hintValue}\n                />\n              }\n            </FlexibleWidthXYPlot>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","import React from 'react';\nimport { Menu } from 'semantic-ui-react';\n\nexport default function ChartBottomMenu(props) {\n  const intervalInMonths = props.intervalInMonths;\n\n  return (\n    <Menu secondary>\n      <Menu.Item name='monthly' value='1' active={intervalInMonths === 1} onClick={props.handleItemClick} />\n      <Menu.Item name='quarterly' value='3' active={intervalInMonths === 3} onClick={props.handleItemClick} />\n      <Menu.Item name='yearly' value='12' active={intervalInMonths === 12} onClick={props.handleItemClick} />\n    </Menu>\n  );\n}\n","import React from 'react';\nimport { Menu } from 'semantic-ui-react';\n\nimport ChartFactory from '../helpers/ChartFactory';\n\nexport default function ChartTopMenu(props) {\n  const chartType = props.chartType;\n\n  return (\n    <Menu secondary>\n      <Menu.Item\n        name={ChartFactory.CHART_TYPES.FASTEST_GROWTH}\n        active={chartType === ChartFactory.CHART_TYPES.FASTEST_GROWTH}\n        onClick={props.handleItemClick}\n      >Fastest growth</Menu.Item>\n      <Menu.Item\n        name={ChartFactory.CHART_TYPES.MOST_GROWTH}\n        active={chartType === ChartFactory.CHART_TYPES.MOST_GROWTH}\n        onClick={props.handleItemClick}\n      >Most growth</Menu.Item>\n      <Menu.Item\n        name={ChartFactory.CHART_TYPES.TOP_LANGUAGES}\n        active={chartType === ChartFactory.CHART_TYPES.TOP_LANGUAGES}\n        onClick={props.handleItemClick}\n      >Top</Menu.Item>\n    </Menu>\n  );\n}\n","import React, { Component } from 'react';\nimport { Container, Grid, Item } from 'semantic-ui-react';\n\nimport Chart from './Chart';\nimport ChartBottomMenu from './ChartBottomMenu';\nimport ChartFactory from '../helpers/ChartFactory';\nimport ChartTopMenu from './ChartTopMenu';\n\nimport './ChartGroup.css';\n\nexport default class ChartGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chartType: ChartFactory.CHART_TYPES.MOST_GROWTH,\n      intervalInMonths: 3,\n    };\n\n    this.handleChartTypeChanged = this.handleChartTypeChanged.bind(this);\n    this.handleIntervalChanged = this.handleIntervalChanged.bind(this);\n  }\n\n  handleChartTypeChanged(_event, { name }) {\n    this.setState({ chartType: name });\n  }\n\n  handleIntervalChanged(_event, { value }) {\n    this.setState({ intervalInMonths: Number(value) });\n  }\n\n  render() {\n    return (\n      <Container>\n        <Grid centered padded>\n          <Item.Group className=\"chart-group\">\n            <Item.Content>\n              <Grid centered padded>\n                <ChartTopMenu\n                  chartType={this.state.chartType}\n                  handleItemClick={this.handleChartTypeChanged}\n                />\n              </Grid>\n              <Chart\n                chartType={this.state.chartType}\n                intervalInMonths={this.state.intervalInMonths}\n              />\n              <Grid centered padded>\n                <ChartBottomMenu\n                  handleItemClick={this.handleIntervalChanged}\n                  intervalInMonths={this.state.intervalInMonths}\n                />\n              </Grid>\n            </Item.Content>\n          </Item.Group>\n        </Grid>\n      </Container>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Container, Icon, Menu, Popup } from 'semantic-ui-react';\n\nexport default class Header extends Component {\n  render() {\n    return (\n      <Menu attached borderless inverted>\n        <Container>\n          <Menu.Item fitted=\"horizontally\" header>\n            Programming language trends\n          </Menu.Item>\n\n          <Menu.Menu position=\"right\">\n            <Popup\n              on=\"click\"\n              trigger={\n                <Menu.Item icon>\n                  <Icon name=\"help circle\" size=\"big\" />\n                </Menu.Item>\n              }\n            >\n              <Popup.Content>\n                <h3>How the data is calculated</h3>\n                <p>\n                  First, a base numerical value for a given language and date is\n                  calculated by adding the total number of GitHub repositories\n                  to the total number of Stack Overflow tags for that language\n                  up to that day.\n                </p>\n                <h4>Fastest growth</h4>\n                <p>\n                  Languages with the highest percentage change compared to the\n                  previous date. Note that scores under a certain threshold (\n                  <a href=\"https://github.com/bmaupin/langtrends/blob/master/src/settings.json#L2\">\n                    currently 1000\n                  </a>\n                  ) are filtered out to reduce{' '}\n                  <a href=\"https://xkcd.com/1102/\">dubiousness</a>.\n                </p>\n                <h4>Most growh</h4>\n                <p>\n                  Languages with the highest numerical change compared to the\n                  previous date.\n                </p>\n                <h4>Top</h4>\n                <p>\n                  Languages with the total highest value for a particular given\n                  date.\n                </p>\n              </Popup.Content>\n            </Popup>\n            <Menu.Item href=\"https://github.com/bmaupin/langtrends\" icon>\n              <Icon name=\"github\" size=\"big\" />\n            </Menu.Item>\n          </Menu.Menu>\n        </Container>\n      </Menu>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport ChartGroup from './ChartGroup';\nimport Header from './Header';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Header />\n        <ChartGroup />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}