(this.webpackJsonplangtrends=this.webpackJsonplangtrends||[]).push([[0],{115:function(t,e,n){},183:function(t,e,n){},185:function(t,e,n){},186:function(t,e,n){},187:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(46),c=n.n(a),u=n(16),s=n(13),i=n(29),o=n(27),l=n(31),h=n(205),f=n(211),p=n(208),b=n(209),j=(n(115),n(5));function d(t){var e=t.intervalInMonths;return Object(j.jsxs)(b.a.Group,{basic:!0,className:"button-group",children:[Object(j.jsx)(b.a,{value:"1",active:1===e,onClick:t.handleItemClick,children:"Monthly"}),Object(j.jsx)(b.a,{value:"3",active:3===e,onClick:t.handleItemClick,children:"Quarterly"}),Object(j.jsx)(b.a,{value:"12",active:12===e,onClick:t.handleItemClick,children:"Yearly"})]})}var v,O=n(8),g=n.n(O),m=n(15),x=n(135),y=n.n(x),k=n(35),w=n(50),S=n(48),T="https://bmaupin.github.io/langtrends-data/data",C=function(){function t(){Object(u.a)(this,t)}return Object(s.a)(t,null,[{key:"buildDates",value:function(){var e=Object(m.a)(g.a.mark((function e(n){var r,a,c,u,s,i=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:S.numberOfDates,a=[],e.next=4,t.getLatestDateFromApi();case 4:return c=e.sent,e.next=7,t.getEarliestDateFromApi();case 7:u=e.sent,s=0;case 9:if(!(s<r)){e.next=17;break}if(!(c<u)){e.next=12;break}return e.abrupt("break",17);case 12:a.push(c),c=t.subtractMonthsUTC(c,n);case 14:s++,e.next=9;break;case 17:return a.reverse(),e.abrupt("return",a.map((function(t){return t.toISOString().slice(0,10)})));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestDateFromApi",value:function(){var e=Object(m.a)(g.a.mark((function e(){var n,r,a,c,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getScoresFromApi();case 2:n=e.sent,r="",a=Object(w.a)(n);try{for(a.s();!(c=a.n()).done;)(u=c.value).date>r&&(r=u.date)}catch(s){a.e(s)}finally{a.f()}return e.abrupt("return",new Date(r));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getScoresFromApi",value:function(){var t=Object(m.a)(g.a.mark((function t(e){var n,r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI("".concat(T,"/scores.json")),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:if(a=t.sent,!e){t.next=9;break}return t.abrupt("return",a.filter((function(t){return e.includes(t.date)})));case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getEarliestDateFromApi",value:function(){var e=Object(m.a)(g.a.mark((function e(){var n,r,a,c,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getScoresFromApi();case 2:n=e.sent,r="",a=Object(w.a)(n);try{for(a.s();!(c=a.n()).done;)(u=c.value).date<r&&(r=u.date)}catch(s){a.e(s)}finally{a.f()}return e.abrupt("return",new Date(r));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"subtractMonthsUTC",value:function(t,e){var n=new Date(t);return n.setUTCMonth(n.getUTCMonth()-e),n}},{key:"getScores",value:function(){var t=Object(m.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getScoresWithLanguages(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getScoresWithLanguages",value:function(){var t=Object(m.a)(g.a.mark((function t(e){var n,r,a,c,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLanguagesFromApi();case 2:return n=t.sent,t.next=5,this.getScoresFromApi(e);case 5:r=t.sent,a=Object(w.a)(r);try{for(u=function(){var t=c.value;t.language=n.find((function(e){return e.id===t.languageId}))},a.s();!(c=a.n()).done;)u()}catch(s){a.e(s)}finally{a.f()}return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLanguagesFromApi",value:function(){var t=Object(m.a)(g.a.mark((function t(){var e,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=encodeURI("".concat(T,"/languages.json")),t.next=3,fetch(e);case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}(),F=n(48),_=function(){function t(e){Object(u.a)(this,t),this.dates=void 0,this.interval=void 0,this.interval=e}return Object(s.a)(t,[{key:"getDates",value:function(){var t=Object(m.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDatesForCalculations();case 2:return t.abrupt("return",t.sent.slice(1));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDatesForCalculations",value:function(){var t=Object(m.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dates){t.next=4;break}return t.next=3,C.buildDates(this.interval,F.numberOfDates+1);case 3:this.dates=t.sent;case 4:return t.abrupt("return",this.dates);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSeries",value:function(){var e=Object(m.a)(g.a.mark((function e(){var n,r,a,c,u,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDatesForCalculations();case 2:return n=e.sent,e.next=5,C.getScores(n);case 5:return r=e.sent,a=t.organizeScoresByDate(r),c=this.getCustomScoresByDate(a,n),e.next=10,this.getDates();case 10:return u=e.sent,e.next=13,t.calculateTopScores(c,u);case 13:return s=e.sent,e.next=16,this.formatDataForChart(s,u);case 16:return i=e.sent,e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomScoresByDate",value:function(e,n){for(var r={},a=1;a<n.length;a++){var c=n[a],u=n[a-1];for(var s in r[c]={},e[c]){var i=this.calculateCustomScore(e[u][s],e[c][s]);i=t.convertNonFiniteNumber(i),r[c][s]=i}}return r}},{key:"formatDataForChart",value:function(){var e=Object(m.a)(g.a.mark((function e(n,r){var a,c,u,s,i,o,l,h,f,p,b,j,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],c=t.getAllTopLanguages(n),u=Object(w.a)(c);try{for(u.s();!(s=u.n()).done;)i=s.value,a.push({title:i,data:[]})}catch(v){u.e(v)}finally{u.f()}for(o=0;o<r.length;o++){l=r[o],h=0,f=Object(w.a)(c);try{for(f.s();!(p=f.n()).done;)b=p.value,j=0,d=0,n[l].hasOwnProperty(b)&&(j=n[l][b],d=Object.keys(n[l]).indexOf(b)+1),a[h].data.push({x:o,y:d,hintTitle:b,hintValue:this.formatHintValue(j)}),h++}catch(v){f.e(v)}finally{f.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"organizeScoresByDate",value:function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].date,a=t[n].language.name,c=t[n].points;e.hasOwnProperty(r)||(e[r]={}),e[r][a]=c}return e}},{key:"convertNonFiniteNumber",value:function(t){return Number.isFinite(t)?t:0}},{key:"calculateTopScores",value:function(){var t=Object(m.a)(g.a.mark((function t(e,n){var r,a,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r={},a=function(t){var a=n[t];r[a]={};for(var c=Object.keys(e[a]).sort((function(t,n){return e[a][n]-e[a][t]})),u=0;u<F.numberOfLanguages;u++){var s=c[u];r[a][s]=e[a][s]}},c=0;c<n.length;c++)a(c);return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAllTopLanguages",value:function(t){var e=[];for(var n in t)for(var r in t[n])e.includes(r)||e.push(r);return e}}]),t}(),D=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e}},{key:"formatHintValue",value:function(t){return String(t)}}]),n}(_),M=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e/t*100}},{key:"formatHintValue",value:function(t){return"".concat(Math.round(t),"% growth")}}]),n}(_),I=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"calculateCustomScore",value:function(t,e){return e-t}},{key:"formatHintValue",value:function(t){return"+".concat(t)}}]),n}(_);!function(t){t.FastestGrowth="FASTEST_GROWTH",t.MostGrowth="MOST_GROWTH",t.TopLanguages="TOP_LANGUAGES"}(v||(v={}));var L=function(){function t(){Object(u.a)(this,t)}return Object(s.a)(t,null,[{key:"fromType",value:function(){var t=Object(m.a)(g.a.mark((function t(e,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===v.FastestGrowth?3:t.t0===v.MostGrowth?5:t.t0===v.TopLanguages?7:9;break;case 3:return r=new M(n),t.abrupt("break",10);case 5:return r=new I(n),t.abrupt("break",10);case 7:return r=new D(n),t.abrupt("break",10);case 9:throw new Error("Unknown chart type: ".concat(e));case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();function N(t,e){this._context=t,this._compression=e}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:!function(t,e,n){t._context.bezierCurveTo(t._prevX+(e-t._prevX)*t._compression,t._prevY,e-(e-t._prevX)*t._compression,n,e,n)}(this,t,e)}this._prevX=t,this._prevY=e}};var G=function t(e){function n(t){return new N(t,e)}return n.compression=function(e){return t(e)},n}(.75);n(183),n(184);function A(t){var e=Object(r.useState)([]),n=Object(l.a)(e,2),a=n[0],c=n[1],u=Object(r.useState)([]),s=Object(l.a)(u,2),i=s[0],o=s[1],h=Object(r.useState)(null),f=Object(l.a)(h,2),p=f[0],b=f[1],d=Object(r.useState)(null),v=Object(l.a)(d,2),O=v[0],x=v[1],w=Object(r.useState)([]),S=Object(l.a)(w,2),T=S[0],C=S[1],_=Object(r.useState)([]),D=Object(l.a)(_,2),M=D[0],I=D[1];Object(r.useEffect)((function(){var e=function(){var e=Object(m.a)(g.a.mark((function e(){var n,r,a,u,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.fromType(t.chartType,t.intervalInMonths);case 2:return n=e.sent,e.next=5,n.getDates();case 5:return r=e.sent,e.next=8,n.getSeries();case 8:a=e.sent,u=N(a),s=A(a),c(a),o(r),C(u),I(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.chartType,t.intervalInMonths]);var N=function(t){return t.map((function(t){return t.data[0]})).sort((function(t,e){return e.y-t.y})).map((function(t){return t&&t.hintTitle}))},A=function(t){return t.map((function(t){return t.data[t.data.length-1]})).sort((function(t,e){return e.y-t.y})).map((function(t){return t&&t.hintTitle}))},E=function(){b(null),x(null)},H=function(t){return t.slice(0,7)},U=G.compression(.5);return Object(j.jsx)("div",{className:"chart-container",children:Object(j.jsx)("div",{className:"chart-content",children:Object(j.jsxs)(k.a,{height:49*F.numberOfLanguages,margin:{left:80,right:80},yDomain:[F.numberOfLanguages,1],children:[Object(j.jsx)(k.e,{}),Object(j.jsx)(k.c,{}),Object(j.jsx)(k.f,{tickFormat:function(t,e){return H(i[e])},tickTotal:i.length}),Object(j.jsx)(k.g,{orientation:"left",tickFormat:function(t,e){return T[e]}}),Object(j.jsx)(k.g,{orientation:"right",tickFormat:function(t,e){return M[e]}}),a.map((function(t,e){return Object(j.jsx)(k.d,{curve:U,getNull:function(t){return 0!==t.y},color:y.a.get(t.title,!0).color,data:t.data,opacity:null===O||O===e?1:.5,onValueMouseOut:E,onValueMouseOver:function(t){return n=e,b(t),void x(n);var n},strokeWidth:null!==O&&O===e?4:void 0,lineStyle:{pointerEvents:"none"}},t.title)})),p&&Object(j.jsx)(k.b,{format:function(t){return[{title:t.hintTitle,value:t.hintValue}]},value:p})]})})})}function E(t){var e=t.chartType;return Object(j.jsxs)(b.a.Group,{basic:!0,className:"button-group",children:[Object(j.jsx)(b.a,{name:v.FastestGrowth,active:e===v.FastestGrowth,onClick:t.handleItemClick,children:"Fastest growth"}),Object(j.jsx)(b.a,{name:v.MostGrowth,active:e===v.MostGrowth,onClick:t.handleItemClick,children:"Most growth"}),Object(j.jsx)(b.a,{name:v.TopLanguages,active:e===v.TopLanguages,onClick:t.handleItemClick,children:"Top"})]})}n(185);function H(){var t=Object(r.useState)(v.MostGrowth),e=Object(l.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(3),u=Object(l.a)(c,2),s=u[0],i=u[1];return Object(j.jsx)(h.a,{children:Object(j.jsx)(f.a,{centered:!0,padded:!0,children:Object(j.jsx)(p.a.Group,{className:"main",children:Object(j.jsxs)(p.a.Content,{children:[Object(j.jsx)(f.a,{centered:!0,className:"button-group-grid",children:Object(j.jsx)(E,{chartType:n,handleItemClick:function(t,e){var n=e.name;n&&a(n)}})}),Object(j.jsx)(A,{chartType:n,intervalInMonths:s}),Object(j.jsx)(f.a,{centered:!0,className:"button-group-grid",children:Object(j.jsx)(d,{handleItemClick:function(t,e){var n=e.value;i(Number(n))},intervalInMonths:s})})]})})})})}var U=n(207),V=n(206),z=n(64),B=(n(186),function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsx)(U.a,{attached:!0,borderless:!0,inverted:!0,children:Object(j.jsxs)(h.a,{children:[Object(j.jsx)(U.a.Item,{className:"header-title",fitted:"horizontally",header:!0,children:"Programming language trends"}),Object(j.jsxs)(U.a.Menu,{position:"right",children:[Object(j.jsx)(V.a,{on:"click",trigger:Object(j.jsx)(U.a.Item,{icon:!0,children:Object(j.jsx)(z.a,{name:"help circle",size:"big"})}),children:Object(j.jsxs)(V.a.Content,{children:[Object(j.jsx)("h3",{children:"How the data is calculated"}),Object(j.jsx)("p",{children:"First, a base numerical value for a given language and date is calculated by adding the total number of GitHub repositories to the total number of Stack Overflow tags for that language up to that day."}),Object(j.jsx)("h4",{children:"Fastest growth"}),Object(j.jsxs)("p",{children:["Languages with the highest percentage change compared to the previous date. Note that scores under a"," ",Object(j.jsx)("a",{href:"https://github.com/bmaupin/langtrends-data/blob/96b8148cc525d129d11a7a2a357429afe0b6ee63/classes/settings.json#L3",children:"certain threshold"})," ","are filtered out to reduce"," ",Object(j.jsx)("a",{href:"https://xkcd.com/1102/",children:"dubious claims"}),"."]}),Object(j.jsx)("h4",{children:"Most growth"}),Object(j.jsx)("p",{children:"Languages with the highest numerical change compared to the previous date."}),Object(j.jsx)("h4",{children:"Top"}),Object(j.jsx)("p",{children:"Languages with the total highest value for a particular given date."})]})}),Object(j.jsx)(U.a.Item,{href:"https://github.com/bmaupin/langtrends",icon:!0,children:Object(j.jsx)(z.a,{name:"github",size:"big"})})]})]})})}}]),n}(r.Component)),P=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(B,{}),Object(j.jsx)(H,{})]})}}]),n}(r.Component),W=P;c.a.render(Object(j.jsx)(W,{}),document.getElementById("root"))},48:function(t){t.exports=JSON.parse('{"numberOfDates":12,"numberOfLanguages":10}')}},[[187,1,2]]]);
//# sourceMappingURL=main.aa6f0587.chunk.js.map